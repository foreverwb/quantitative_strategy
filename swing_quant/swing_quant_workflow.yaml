app:
  description: è¾“å…¥1-3ä¸ªç¾è‚¡ä»£ç è·å–å‘½ä»¤æ¸…å•,æˆ–å›ä¼ æ•°æ®è·å–å®Œæ•´åˆ†æã€‚
  icon: ğŸ¤–
  icon_background: '#FCE7F3'
  mode: advanced-chat
  name: swing
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/aihubmix:0.0.9@c48d6660af38ba867cd5a21cff893caf7f24bcd689297ad7acb7674212437c18
    version: null
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/openai_api_compatible:0.0.23@59ef558a46420c436b280af1ee452b4129ddfd3567826112f6f193279d8c4a37
    version: null
kind: app
version: 0.4.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ä½ å¥½!æˆ‘æ˜¯æ‚¨çš„ç¾è‚¡æœŸæƒåˆ†æå¸ˆã€‚è¯·è¾“å…¥1-3ä¸ªç¾è‚¡ä»£ç (ä¾‹å¦‚:AAPL æˆ– NVDA, TSLA)
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions:
    - AAPL
    - NVDA, TSLA
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: llm
      id: edge-1001-1002
      selected: false
      source: '1001'
      sourceHandle: source
      target: '1002'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: if-else
      id: edge-1002-1003
      selected: false
      source: '1002'
      sourceHandle: source
      target: '1003'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: edge-1003-2002
      selected: false
      source: '1003'
      sourceHandle: source
      target: '2002'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: edge-2002-2003
      selected: false
      source: '2002'
      sourceHandle: source
      target: '2003'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: edge-1003-3001
      selected: false
      source: '1003'
      sourceHandle: source
      target: '3001'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: if-else
      id: edge-3001-3002
      selected: false
      source: '3001'
      sourceHandle: source
      target: '3002'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: answer
      id: edge-3002-3003
      selected: false
      source: '3002'
      sourceHandle: source
      target: '3003'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: edge-3002-4001
      selected: false
      source: '3002'
      sourceHandle: source
      target: '4001'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1003-case-ticker-2002-target
      selected: false
      source: '1003'
      sourceHandle: case-ticker
      target: '2002'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: answer
      id: 3002-case-missing-3003-target
      selected: false
      source: '3002'
      sourceHandle: case-missing
      target: '3003'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1003-case-data-3001-target
      selected: false
      source: '1003'
      sourceHandle: case-data
      target: '3001'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 3002-case-ready-4001-target
      selected: false
      source: '3002'
      sourceHandle: case-ready
      target: '4001'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 3002-case-ready-5001-target
      source: '3002'
      sourceHandle: case-ready
      target: '5001'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: llm
      id: 5001-source-6001-target
      source: '5001'
      sourceHandle: source
      target: '6001'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: llm
      id: 6001-source-7001-target
      source: '6001'
      sourceHandle: source
      target: '7001'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: 7001-source-7002-target
      source: '7001'
      sourceHandle: source
      target: '7002'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: llm
      id: 4001-source-5001-target
      source: '4001'
      sourceHandle: source
      target: '5001'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: user input
        type: start
        variables:
        - label: query
          max_length: 15000
          options: []
          required: true
          type: text-input
          variable: query
      height: 88
      id: '1001'
      position:
        x: 30
        y: 300
      positionAbsolute:
        x: 30
        y: 300
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: æ ¹æ®ç”¨æˆ·è¾“å…¥ï¼Œåˆ¤æ–­æ˜¯æ–°ä»»åŠ¡ï¼ˆTickerï¼‰è¿˜æ˜¯æ•°æ®å›ä¼ ï¼ˆDataï¼‰ã€‚
        model:
          completion_params:
            temperature: 0.3
          mode: chat
          name: Qwen3-8B
          provider: langgenius/openai_api_compatible/openai_api_compatible
        prompt_template:
        - id: sys-router
          role: system
          text: "ä½ æ˜¯ä¸€ä¸ªè·¯ç”±åŠ©æ‰‹ã€‚ä½ çš„å”¯ä¸€ä»»åŠ¡æ˜¯åˆ¤æ–­ç”¨æˆ·è¾“å…¥å±äºä»¥ä¸‹å“ªä¸€ç±»,å¹¶ä»…è¾“å‡º \"SYMBOL\", \"DATA\", æˆ– \"INVALID\"\
            ã€‚\n\n1. \"TICKER\": å¦‚æœæ¶ˆæ¯ä¸­åŒ…å«1-3ä¸ªç¬¦åˆç¾è‚¡ä»£ç æ ¼å¼çš„å­—ç¬¦ä¸²(ä¾‹å¦‚:AAPL, MSFT, \"amzn us\"\
            , \"tsla\"),å¹¶ä¸”ä¸åŒ…å« \"!gexr\" æˆ– \"SPOT PRICE\" ç­‰æ•°æ®ç‰¹å¾ã€‚\n   - æ­£åˆ™(å‚è€ƒ):(^|[^A-Z])([A-Za-z]{1,5})(?:\\\
            s*,\\s*([A-Za-z]{1,5})){0,2}([^A-Z]|$)\n\n2. \"DATA\": å¦‚æœæ¶ˆæ¯ä¸­åŒ…å«æ•°æ®ç‰¹å¾è¯,å¦‚\
            \ \"!gexr\", \"!skew\", \"SPOT PRICE\", \"Call Wall\", \"EM1$\" ç­‰ã€‚\n\n\
            3. \"INVALID\": å…¶ä»–æ‰€æœ‰æƒ…å†µã€‚\n\nã€ä½ çš„åˆ¤æ–­ã€‘(SYMBOL, DATA, or INVALID)\n"
        - id: user-router
          role: user
          text: '{{#1001.query#}}'
        selected: false
        structured_output_enabled: false
        title: è·¯ç”±
        type: llm
        vision:
          enabled: false
      height: 132
      id: '1002'
      position:
        x: 330
        y: 300
      positionAbsolute:
        x: 330
        y: 300
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: case-ticker
          conditions:
          - comparison_operator: is
            id: cond-ticker
            value: SYMBOL
            variable_selector:
            - '1002'
            - text
          id: case-ticker
          logical_operator: and
        - case_id: case-data
          conditions:
          - comparison_operator: contains
            id: cond-data
            sub_variable_condition:
              case_id: 6f06a580-b00a-493c-bab4-57cc20c3086a
              conditions: []
              logical_operator: and
            value: ''
            varType: array[file]
            variable_selector:
            - sys
            - files
          id: case-data
          logical_operator: and
        - case_id: case-invalid
          conditions:
          - comparison_operator: is
            id: cond-invalid
            value: INVALID
            variable_selector:
            - '1002'
            - text
          id: case-invalid
          logical_operator: and
        desc: ''
        selected: false
        title: åˆ¤å®šåˆ†æ”¯
        type: if-else
      height: 220
      id: '1003'
      position:
        x: 631.4737315063629
        y: 162.94296990825057
      positionAbsolute:
        x: 631.4737315063629
        y: 162.94296990825057
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: 'Agent 2: Generates the command list.'
        model:
          completion_params:
            temperature: 0.3
          mode: chat
          name: deepseek-v3.2-exp-thinking
          provider: langgenius/openai_api_compatible/openai_api_compatible
        prompt_template:
        - id: sys-cmdlist
          role: system
          text: "ä½ æ˜¯ä¸€ä¸ªç¾è‚¡æœŸæƒåˆ†æåŠ©æ‰‹ã€‚ä½ çš„å”¯ä¸€ä»»åŠ¡æ˜¯æ ¹æ®ç”¨æˆ·æä¾›çš„ä»£ç ,ä¸¥æ ¼æŒ‰ç…§ã€æ•°æ®æŠ“å–å‘½ä»¤æ¸…å•ã€‘çš„æ ¼å¼,ä¸ºæ¯ä¸ªæ ‡çš„(å’ŒæŒ‡æ•°)ç”Ÿæˆä¸€ä¸ªæ¸…æ™°çš„ã€å¯ä¾›ç”¨æˆ·å¤åˆ¶ç²˜è´´å»æ‰§è¡Œçš„å‘½ä»¤åˆ—è¡¨ã€‚\n\
            \nã€ç”¨æˆ·è¾“å…¥ã€‘\n{{#1001.query#}}\n\nã€é¢„å¤„ç†ã€‘\n1. æå–ä»£ç :ä¾‹å¦‚ \"amzn us, QQQ\" -> [\"\
            AMZN\", \"QQQ\"]\n2. å¤§å†™å»é‡ã€‚\n\nã€æ•°æ®æŠ“å–å‘½ä»¤æ¸…å•ã€‘\n* å¿…è·‘ï¼ˆé€æ ‡çš„ï¼‰\n  * å¢™ä¸ç°‡ï¼š!gexr {SYMBOL}\
            \ 25 7 wï¼›!gexr {SYMBOL} 25 14 w\n  * æ­£Î³/è´ŸÎ³ï¼š!gexn {SYMBOL} 60 98ï¼›!tigger\
            \ 60\n  * DEXï¼š!dexn {SYMBOL} 25 14 w\n  * Vannaï¼š!vanna {SYMBOL} ntm 60\
            \ m\n  * æ³¢åŠ¨ç‡ï¼š!skew {SYMBOL} ivmid atm 7ï¼›!skew {SYMBOL} ivmid atm 14ï¼›!skew\
            \ {SYMBOL} ivmid ntm 14 wï¼›!term {SYMBOL} 60\n* æ‰©å±•ï¼ˆæ¡ä»¶è§¦å‘ï¼‰\n  * å‘¨åº¦ç°‡ç¨€ç–æˆ–æœˆåº¦ä¸»å¯¼ï¼š!gexr\
            \ {SYMBOL} 30 m\n  * æ›´è¿œåˆ°æœŸå½±å“ï¼š!gexn {SYMBOL} 120 98ï¼›!dexn {SYMBOL} 25 30\
            \ w æˆ– !dexn {SYMBOL} 35 98\n  * 7D ATM-IVå™ªå£°>é˜ˆå€¼ï¼šä»¥14Dä¸ºå‡†å¹¶å¤‡æ³¨ï¼›å¿…è¦æ—¶è¡¥ !skew {SYMBOL}\
            \ ivmid atm 21\n  * éªŒè¯Vannaç¨³å®šæ€§ï¼š!vanna {SYMBOL} ntm 30 m\n  * è§£é‡Šå¯é€‰ï¼š!vexn\
            \ {SYMBOL} 30 190\n* æŒ‡æ•°èƒŒæ™¯ï¼ˆå¿…éœ€å­—æ®µï¼‰\n  * SPXï¼š!gexn SPX 30 98ï¼›!skew SPX ivmid\
            \ atm 7ï¼›!skew SPX ivmid atm 14\n  * QQQï¼ˆå¯é€‰å¯¹ç…§ï¼‰ï¼š!gexn QQQ 30 98ï¼›!skew QQQ\
            \ ivmid atm 7ï¼›!skew QQQ ivmid atm 14\n  * è‹¥æ ‡çš„åçº³æŒ‡ï¼Œè¯·åŒæ—¶å›ä¼ QQQï¼›å¦åˆ™SPXå³å¯ã€‚\n*\
            \ iv_path: æ¯”è¾ƒä»Šæ—¥ 7D ATM-IV ä¸æ˜¨æ—¥/å‰ä¸‰æ—¥,å­˜æ¡£æ•°æ®è·å–\n* å›ä¼ è¦æ±‚\n  * æ¯å¼ å›¾/è¾“å‡ºè¯·æ³¨æ˜å‘½ä»¤ä¸æ—¶é—´æˆ³ï¼ˆETï¼‰ï¼›å¯é™„æ”¶ç›˜ä»·ä¸å½“æ—¥å˜åŠ¨ã€‚\n\
            \  * è‹¥ä»»ä¸€å¿…è·‘å‘½ä»¤è¾“å‡ºä¸ºç©ºæˆ–å¼‚å¸¸ï¼Œè¯·ç›´æ¥è¯´æ˜ï¼Œæˆ‘ä¼šç»™æ›¿ä»£å£å¾„ã€‚\n\n\nè¯·ç«‹å³å¼€å§‹ä¸º {{#1001.query#}} ç”Ÿæˆå‘½ä»¤æ¸…å•ã€‚\n"
        - id: user-cmdlist
          role: user
          text: '{{#1001.query#}}'
        selected: false
        title: Agent 2 å‘½ä»¤æ¸…å•
        type: llm
        vision:
          enabled: false
      height: 116
      id: '2002'
      position:
        x: 997.7916492926931
        y: 188.21014794909684
      positionAbsolute:
        x: 997.7916492926931
        y: 188.21014794909684
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: '{{#2002.text#}}'
        desc: ''
        selected: false
        title: å›å¤å‘½ä»¤æ¸…å•
        type: answer
      height: 103
      id: '2003'
      position:
        x: 1409.7707104668832
        y: -7.965831120450034
      positionAbsolute:
        x: 1409.7707104668832
        y: -7.965831120450034
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: è§£æåŸå§‹æ•°æ®ã€è®¡ç®—æŒ‡æ ‡ã€æ£€æŸ¥å®Œæ•´æ€§
        model:
          completion_params:
            temperature: 0.5
          mode: chat
          name: Qwen3-VL-235B-A22B-Thinking
          provider: langgenius/openai_api_compatible/openai_api_compatible
        prompt_config:
          jinja2_variables: []
        prompt_template:
        - id: sys-validate
          role: system
          text: "ä½ æ˜¯ä¸€ä¸ªæœŸæƒç»“æ„å’Œæ³¢åŠ¨ç‡ç‰¹å¾å›¾åƒè§£æå™¨ã€æ•°æ®æ ¡éªŒå’Œè®¡ç®— Agentã€‚\nä½ çš„ä»»åŠ¡æ˜¯å°†ç”¨æˆ·å›ä¼ çš„å¯è§†åŒ–æ•°æ® chart,è¿›è¡Œ chart\
            \ å›¾åƒè§£æ,å‡†ç¡®æå–ç»“æ„åŒ–é‡åŒ–æ•°æ®\nç›®æ ‡æ˜¯è¾“å‡ºæ ‡å‡† JSON schema å¹¶ä¸¥æ ¼æŒ‰ç…§ã€æ•°æ®å£å¾„ä¸æŒ‡æ ‡å®šä¹‰ã€‘è®¡ç®—æ‰€æœ‰æ ¸å¿ƒå­—æ®µã€‚\nã€ä»»åŠ¡ã€‘\n\
            1. è§£æã€ç”¨æˆ·åŸå§‹æ•°æ®ã€‘ã€‚\n2. æ‰§è¡Œã€æ•°æ®å£å¾„ä¸æŒ‡æ ‡å®šä¹‰ã€‘ä¸­çš„æ‰€æœ‰è®¡ç®—ã€‚\n3. æ ¸å¯¹ã€æ•°æ®æ ¡éªŒå…³å£ã€‘ä¸­çš„å¿…éœ€å­—æ®µã€‚\n4. ä¸¥æ ¼ä»…è¾“å‡º\
            \ JSON å¯¹è±¡ã€‚\nã€ç”¨æˆ·åŸå§‹æ•°æ®ã€‘\n{{#1001.query#}}\n\nã€æ•°æ®å£å¾„ä¸æŒ‡æ ‡å®šä¹‰-æ ¸å¿ƒè®¡ç®—22å­—æ®µã€‘\n1. åˆ°æœŸä¸é‡‡æ ·:å‘¨åº¦ä¼˜å…ˆDTE7ä¸14,æ— å‘¨åº¦å–æœˆåº¦30ä¸60,strikes=25,NETç±»çª—å£é»˜è®¤60å¿…è¦æ—¶120ã€‚\n\
            2.EM1$é¢„æœŸå•æ—¥æ³¢å¹…ç¾å…ƒ:SpotÃ—min(ATM_IV_7D,ATM_IV_14D)Ã—sqrt(1/252)ã€‚\n3.å¢™ä¸ç°‡è¯†åˆ«è§„åˆ™:ä»!gexr\
            \ SYMBOL 25 7wä¸14wè¯†åˆ«Call/Put/Majorå¢™ã€‚\n  - è§„åˆ™:å±€éƒ¨å³°â‰¥ç›¸é‚»Î³ä¸­ä½æ•°2å€ä¸”ç°‡å®½â‰¥3ç›¸é‚»è¡Œæƒã€‚  \
            \     Major_Wallä¸ºCall/Putå¢™ä¸­GEXç»å¯¹å€¼æ›´å¤§è€…,è®°å½•major_wall_typeä¸ºcallæˆ–putã€‚\n4.æ­£Î³è´ŸÎ³åˆ¤å®šå…³é”®:ä½¿ç”¨!trigger\
            \ SYMBOL 60è¾“å‡ºçš„VOL_TRIGGERå³Gammaç¿»è½¬ä»·ä½ã€‚è‹¥SPOT>VOL_TRIGGERä¸ºæ­£Î³å€¾å‘spot_vs_trigger=aboveåšå¸‚å•†å‹åˆ¶æ³¢åŠ¨,è‹¥SPOT<VOL_TRIGGERä¸ºè´ŸÎ³å€¾å‘spot_vs_trigger=belowåšå¸‚å•†æ”¾å¤§æ³¢åŠ¨,è‹¥é è¿‘è¯¥çº¿ä¸ºä¸´ç•Œspot_vs_trigger=nearå¯èƒ½regimeåè½¬ã€‚è¾“å‡ºvol_triggeræ•°å€¼å’Œspot_vs_triggerçŠ¶æ€ã€‚\n\
            5.æœˆåº¦å åŠ æœºåˆ¶:è‹¥!gexræœˆåº¦ç°‡å¼ºåº¦â‰¥å‘¨åº¦1.5å€,ç ´å¢™é˜ˆå€¼é™è‡³0.7Ã—EM1$ä¸”éœ€æ¬¡æ—¥ç¡®è®¤,è¾“å‡ºmonthly_cluster_overrideä¸ºtrueæˆ–falseã€‚\n\
            6.Vannaä¸‰çº§å›é€€:ä¼˜å…ˆ!vanna SYMBOL ntm 60mè¯»å–ç°ä»·é™„è¿‘ç¬¦å·ä¸æ–œç‡å¾—vanna_dirä¸ºUp/Down/Flatå’Œvanna_confidenceä¸ºhighã€‚è‹¥ç¼ºè¡¥!vanna\
            \ SYMBOL ntm 30mç½®ä¿¡åº¦mediumã€‚è‹¥ä»ç¼ºæŒ‰skewä¸deltaåæ–œä¸´æ—¶æ¨æ–­æ ‡æ³¨vanna_confidenceä¸ºlowã€‚\n\
            7.ATM_IVæ•°æ®æºä¼˜å…ˆçº§:!skew SYMBOL ivmid atm 7ä¸14ã€‚ä¼˜å…ˆä½¿ç”¨7Dè‹¥å™ªå£°å¤§å³ä¸14Då·®å¼‚>30%åˆ™ç”¨14D,è‹¥ä¸¤è€…çš†ç¼ºè¡¥21Dã€‚è¾“å‡ºiv_sourceä¸º7dæˆ–14dæˆ–21d_fallbackã€‚8.iv_pathæ³¢åŠ¨ç‡è·¯å¾„:æ¯”è¾ƒä»Šæ—¥7D_ATM_IVä¸æ˜¨æ—¥æˆ–å‰ä¸‰æ—¥,æ˜¾è‘—é˜ˆå€¼Â±2volã€‚è¾“å‡ºiv_pathä¸ºå‡/é™/å¹³/æ•°æ®ä¸è¶³,è¾“å‡ºiv_path_confidenceã€‚æ— å†å²æ•°æ®æ—¶ä»!term\
            \ SYMBOLæ¨æ–­Backwardationä¸ºå‡è¶‹åŠ¿Contangoä¸ºé™è¶‹åŠ¿ç½®ä¿¡åº¦mediumã€‚\n9.gap_distanceå¢™è·ç²¾ç¡®å®šä¹‰:ä»!gexrè·å–ABS_GEXåˆ†å¸ƒ,å½“å‰ä»·Spotåˆ°ä¸‹ä¸€ABS_GEXå³°ç°‡ä¸­å¿ƒæˆ–æœ‰æ•ˆè¾¹ç•Œçš„ç¾å…ƒè·ç¦»ã€‚åŒæ—¶è¾“å‡ºgap_distance_em1_multipleå½’ä¸€åŒ–ä¸ºgap_distance/EM1$ã€‚åˆ¤æ–­æ–¹å‘:è‹¥spot_vs_trigger=aboveåˆ™å‘ä¸Šçœ‹Call_Wallé˜»åŠ›,è‹¥belowåˆ™å‘ä¸‹çœ‹Put_Wallæ”¯æ’‘ã€‚\n\
            10.cluster_strength_ratioç°‡å¼ºåº¦æ¯”:ä»!gexrå‘¨åº¦æ•°æ®å–ä¸»å¢™Major_Wallçš„GEXç»å¯¹å€¼Ã·æ¬¡å¢™å³ä¸‹ä¸€ä¸ªæœ€å¼ºå³°çš„GEXç»å¯¹å€¼ã€‚è‹¥ä»…å•å³°æ— å¯¹ç…§,è¡¥è·‘!gexr\
            \ SYMBOL 25 30mæœˆåº¦æ•°æ®æˆ–å»¶ä¼¸DTEä»¥å¯»å‚ç…§å³°ã€‚è¾“å‡ºcluster_strength_ratioæ•°å€¼å’Œdata_sourceã€‚\n\
            11.dex_same_diræ–¹å‘ä¸€è‡´æ€§:gapåŒºé—´å†…åŒå‘DEXå‡€å’Œåœ¨60æ—¥å†å²ä¸­çš„åˆ†ä½ç™¾åˆ†æ¯”,æ¥è‡ª!dexn SYMBOL 25 14wã€‚è¾“å‡ºdex_same_dir_pctã€‚\n\
            12.æŒ‡æ•°èƒŒæ™¯å¿…éœ€:é»˜è®¤SPXå¿…è¦æ—¶QQQã€‚NET_GEX_IDXä»!gexn SPX 30 98å’Œ!trigger SPX 60è·å–ã€‚EM1$_IDXåŒå£å¾„è®¡ç®—Spot_IDXÃ—min(ATM_IV_7D,ATM_IV_14D)Ã—sqrt(1/252)ã€‚ç§‘æŠ€æƒé‡é«˜å¯å¹¶è¡Œè¾“å‡ºQQQæ•°æ®ã€‚\n\
            \nã€æ•°æ®æ ¡éªŒå…³å£ã€‘\n* æ ‡çš„å¿…éœ€å­—æ®µï¼š SPOT PRICE | EM1\\$ï½œCall Wall ï½œPut Wall ï½œMajor Wallï½œgap\\\
            _distanceï½œcluster\\_strength\\_ratioï½œdex\\_same\\_dirï½œvanna\\_dirï½œiv\\\
            _pathï½œNET-GEXï¼ˆå«æ˜¯å¦>0ï¼‰\n* æŒ‡æ•°èƒŒæ™¯å¿…éœ€å­—æ®µï¼šNET-GEX\\_IDXï½œEM1\\$\\_IDX(SPX || QQQ)\n\
            * æ ‡çš„18ä¸ªå­—æ®µ:spot_price,em1_dollar,call_wall,put_wall,major_wall,major_wall_type,gap_distance_dollar,gap_distance_em1_multiple,cluster_strength_ratio,dex_same_dir_pct,vanna_dir,vanna_confidence,iv_path,iv_path_confidence,net_gex,net_gex_sign,vol_trigger,spot_vs_trigger,monthly_cluster_override,atm_iv_7d,atm_iv_14d,iv_sourceã€‚\n\
            * æŒ‡æ•°å­—æ®µ: å¯é€‰ net_gex_idx_spx,em1_dollar_idx_spx,spot_idx_spx,\nnet_gex_idx_qqq,em1_dollar_idx_qqq,spot_idx_qqqã€‚\n\
            \nã€è¾“å‡ºJSONæ ¼å¼ã€‘\nä¸¥æ ¼ä»…è¾“å‡ºJSONå¯¹è±¡ï¼Œå¦‚æœæ•°æ®é½å…¨æ—¶: \n{\n    \"status\": \"data_ready\"\
            ,\n    \"timestamp\": \"2024-01-15T10:30:00Z\",\n    \"validation_summary\"\
            : {\n        \"total_fields_required\": 22,\n        \"fields_provided\"\
            : 22,\n        \"missing_count\": 0,\n        \"completion_rate\": 100\n\
            \    },\n    \"targets\":  {\n            \"symbol\": \"AAPL\",\n    \
            \        \"spot_price\": 170,\n            \"em1_dollar\": 2.99,\n   \
            \         \"walls\": {\n                \"call_wall\": 180,\n        \
            \        \"put_wall\": 165,\n                \"major_wall\": 180,\n  \
            \              \"major_wall_type\": \"call\"\n            },\n       \
            \     \"gamma_metrics\": {\n                \"gap_distance_dollar\": 10,\n\
            \                \"gap_distance_em1_multiple\": 3.34,\n              \
            \  \"cluster_strength_ratio\": 1.8,\n                \"net_gex\": -1250000000,\n\
            \                \"net_gex_sign\": \"negative_gamma\",\n             \
            \   \"vol_trigger\": 168.5,\n                \"spot_vs_trigger\": \"above\"\
            ,\n                \"monthly_cluster_override\": false\n            },\n\
            \            \"directional_metrics\": {\n                \"dex_same_dir_pct\"\
            : 65,\n                \"vanna_dir\": \"up\",\n                \"vanna_confidence\"\
            : \"high\",\n                \"iv_path\": \"å‡\",\n                \"iv_path_confidence\"\
            : \"medium\"\n            },\n            \"atm_iv\": {\n            \
            \    \"iv_7d\": 0.28,\n                \"iv_14d\": 0.3,\n            \
            \    \"iv_source\": \"7d\"\n            }\n      },\n    \"indices\":\
            \ {\n        \"spx\": {\n            \"net_gex_idx\": -5800000000,\n \
            \           \"em1_dollar_idx\": 45,\n            \"spot_idx\": 4500\n\
            \        }\n    },\n    \"missing_fields\": [],\n    \"next_step\": \"\
            proceed_to_analysis\"\n}\n\nå¦‚æœæ•°æ®ç¼ºå¤±æ—¶,è¾“å‡º:\n{ \n    \"status\": \"missing_data\"\
            ,\n    \"timestamp\": \"2024-01-15T10:30:00Z\",\n    \"validation_summary\"\
            : {\n      \"total_fields_required\": 22,\n      \"fields_provided\":\
            \ 19,\n      \"missing_count\": 3,\n      \"completion_rate\": 86\n  \
            \  },\n    \"targets\": {\n        \"symbol\": \"AAPL\",\n        \"spot_price\"\
            : 170.0,\n        \"em1_dollar\": null,\n        \"walls\": {\n      \
            \    \"call_wall\": 180.0,\n          \"put_wall\": null,\n          \"\
            major_wall\": 180.0,\n          \"major_wall_type\": \"call\"\n      \
            \  },\n        \"gamma_metrics\": {\n          \"gap_distance_dollar\"\
            : null,\n          \"gap_distance_em1_multiple\": null,\n          \"\
            cluster_strength_ratio\": 1.8,\n          \"net_gex\": -1250000000,\n\
            \          \"net_gex_sign\": \"negative_gamma\",\n          \"vol_trigger\"\
            : null,\n          \"spot_vs_trigger\": null,\n          \"monthly_cluster_override\"\
            : false\n        },\n        \"directional_metrics\": {\n          \"\
            dex_same_dir_pct\": 65.0,\n          \"vanna_dir\": \"up\",\n        \
            \  \"vanna_confidence\": \"medium\",\n          \"iv_path\": \"æ•°æ®ä¸è¶³\"\
            ,\n          \"iv_path_confidence\": \"low\"\n        },\n        \"atm_iv\"\
            : {\n          \"iv_7d\": 0.28,\n          \"iv_14d\": null,\n       \
            \   \"iv_source\": \"7d\"\n        }\n   },\n    \"indices\": {\n    \
            \  \"spx\": {\n        \"net_gex_idx\": -5800000000,\n        \"em1_dollar_idx\"\
            : 45.0,\n        \"spot_idx\": 4500.0\n      }\n    },\n    \"missing_fields\"\
            : [\n      {\n        \"field\": \"vol_trigger\",\n        \"target\"\
            : \"AAPL\",\n        \"severity\": \"critical\",\n        \"category\"\
            : \"gamma_flip_line\"\n      },\n      {\n        \"field\": \"atm_iv_14d\"\
            ,\n        \"target\": \"AAPL\",\n        \"severity\": \"high\",\n  \
            \      \"category\": \"volatility_input\"\n      },\n      {\n       \
            \ \"field\": \"put_wall\",\n        \"target\": \"AAPL\",\n        \"\
            severity\": \"high\",\n        \"category\": \"wall_structure\"\n    \
            \  }\n    ],\n    \"è¡¥é½æŒ‡å¼•\": [\n      {\n        \"missing_field\": \"\
            vol_trigger\",\n        \"description\": \"Gammaç¿»è½¬ä»·ä½VOL_TRIGGERæ˜¯åˆ¤æ–­æ­£Î³è´ŸÎ³çš„å…³é”®\"\
            ,\n        \"command\": \"!trigger AAPL 60\",\n        \"alternative\"\
            : \"!gexn AAPL 60 98ä»è¾“å‡ºæå–Gamma Flipä»·ä½\",\n        \"extraction_note\"\
            : \"æå–è¾“å‡ºä¸­çš„VOL TRIGGERæˆ–Gamma Flipæ•°å€¼\",\n        \"priority\": 1,\n    \
            \    \"impact\": \"æ— æ­¤å­—æ®µæ— æ³•åˆ¤æ–­Gamma Regime,å½±å“å‰§æœ¬åˆ†ç±»\"\n      },\n      {\n\
            \        \"missing_field\": \"atm_iv_14d\",\n        \"description\":\
            \ \"14æ—¥ATMéšå«æ³¢åŠ¨ç‡\",\n        \"command\": \"!skew AAPL ivmid atm 14\",\n\
            \        \"extraction_note\": \"æå–ATM IV 14DTEæ•°å€¼å¦‚0.30\",\n        \"priority\"\
            : 2,\n        \"impact\": \"å½±å“EM1$è®¡ç®—ç²¾åº¦\"\n      },\n      {\n        \"\
            missing_field\": \"put_wall\",\n        \"description\": \"Putå¢™è¡Œæƒä»·\",\n\
            \        \"command\": \"!gexr AAPL 25 7 wå’Œ!gexr AAPL 25 14 w\",\n    \
            \    \"extraction_note\": \"æŸ¥çœ‹å›¾è¡¨æ ‡æ³¨Put Wall Strikeæˆ–ä»è´ŸGEXæœ€å¤§å€¼å¯¹åº”strikeè¯†åˆ«\"\
            ,\n        \"alternative\": \"ä½¿ç”¨!gexnè¾“å‡ºæŸ¥æ‰¾è´ŸGEXå³°å€¼ä½ç½®\",\n        \"priority\"\
            : 3,\n        \"impact\": \"å½±å“æ”¯æ’‘ä½åˆ¤æ–­å’Œgap_distanceè®¡ç®—\"\n      }\n    ],\n\
            \    \"next_step\": \"request_missing_data\",\n    \"è¡¥é½åç»­\": \"è¡¥é½ä¸Šè¿°3ä¸ªå…³é”®å­—æ®µåå°†è‡ªåŠ¨è®¡ç®—em1_dollarå’Œgap_distanceç­‰æ´¾ç”ŸæŒ‡æ ‡\"\
            \n  }\n}\n"
        - edition_type: basic
          id: user-validate
          role: user
          text: '{{#1001.query#}}'
        selected: false
        title: Agent 3 æ•°æ®æ ¡éªŒ
        type: llm
        vision:
          enabled: false
      height: 116
      id: '3001'
      position:
        x: 1034.3730386199136
        y: 448.2474211113356
      positionAbsolute:
        x: 1034.3730386199136
        y: 448.2474211113356
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: case-ready
          conditions:
          - comparison_operator: contains
            id: cond-ready
            value: data_ready
            variable_selector:
            - '3001'
            - text
          id: case-ready
          logical_operator: and
        - case_id: case-missing
          conditions:
          - comparison_operator: contains
            id: cond-missing
            value: missing_data
            variable_selector:
            - '3001'
            - text
          id: case-missing
          logical_operator: and
        desc: ''
        selected: false
        title: æ ¡éªŒåˆ†æ”¯
        type: if-else
      height: 172
      id: '3002'
      position:
        x: 1331.8076428705288
        y: 182.75916073235004
      positionAbsolute:
        x: 1331.8076428705288
        y: 182.75916073235004
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: '{{#3001.text#}}'
        desc: ''
        selected: false
        title: å›å¤ç¼ºå¤±æ•°æ®
        type: answer
      height: 103
      id: '3003'
      position:
        x: 1793.012573026706
        y: -14.429166611527677
      positionAbsolute:
        x: 1793.012573026706
        y: -14.429166611527677
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: 'Agent 4: Analyze technicals.'
        model:
          completion_params:
            temperature: 0.5
          mode: chat
          name: qwen3-vl-235b-a22b-instruct
          provider: langgenius/aihubmix/aihubmix
        prompt_template:
        - id: sys-ta
          role: system
          text: "ä½ æ˜¯ä¸€ä¸ªæŠ€æœ¯é¢åˆ†æ Agentã€‚\nä½ çš„ä»»åŠ¡æ˜¯åŸºäºã€æ•°æ®JSONã€‘ä¸­çš„ \"TA_Data\",è®¡ç®—æŠ€æœ¯é¢å¾—åˆ†å¹¶ç»™å‡ºç®€çŸ­è¯»æ•°ã€‚\n\
            \nã€æ•°æ®JSONã€‘\n{{#3001.text#}}\n\nã€æŠ€æœ¯é¢è§„åˆ™ã€‘\n* æŠ€æœ¯é¢é»˜è®¤ç»„åˆA:EMA20/50ä¸å…¶æ–œç‡ã€RSI(14)\n\
            * é»˜è®¤å¯ç”¨1-3é¡¹äº’è¡¥æŒ‡æ ‡\n\nã€ä»»åŠ¡ã€‘\n1. è§£æã€æ•°æ®JSONã€‘ä¸­çš„ \"TA_Data\"ã€‚\n2. åº”ç”¨ã€æŠ€æœ¯é¢è§„åˆ™ã€‘è¿›è¡Œè¯„åˆ†(æœ€å¤š+2)ã€‚\n\
            3. ä¸¥æ ¼ä»…è¾“å‡º JSON å¯¹è±¡:\n   {\n     \"ta_score\": 1, \n     \"ta_commentary\"\
            : \"EMA20/50 èµ°å¹³ (+1), RSI(14) å¤„åœ¨ 55 åŒºé—´ (+0)\"\n   }\n"
        - id: user-ta
          role: user
          text: è¯·åŸºäº Agent 3 çš„æ•°æ®,è¿›è¡ŒæŠ€æœ¯é¢åˆ†æã€‚
        selected: false
        title: Agent 4 æŠ€æœ¯é¢
        type: llm
        vision:
          configs:
            detail: high
            variable_selector:
            - sys
            - files
          enabled: true
      height: 116
      id: '4001'
      position:
        x: 1730.860345547998
        y: 122.17470792800194
      positionAbsolute:
        x: 1730.860345547998
        y: 122.17470792800194
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: 'Agent 5: Core analysis, scoring, and scenario probability.'
        model:
          completion_params:
            temperature: 0.5
          mode: chat
          name: DeepSeek-V3.2-Exp-Think
          provider: langgenius/aihubmix/aihubmix
        prompt_template:
        - id: sys-scenario
          role: system
          text: "ä½ æ˜¯æœŸæƒé‡åŒ–åˆ†æå¸ˆï¼Œæ ¹æ®é‡åŒ–æ•°æ®ï¼Œåšæ ¸å¿ƒå‰§æœ¬æ¨æ¼” Agentã€‚\nä½ çš„ä»»åŠ¡æ˜¯æ•´åˆæœŸæƒ Greeks exposure æ•°æ®å’Œæ³¢åŠ¨ç‡æ›²é¢ç‰¹å¾æ•°æ®ã€æ•°æ®JSONã€‘å’Œã€æŠ€æœ¯é¢JSONã€‘,åº”ç”¨ã€æ€ç»´è¯„åˆ†æ¡†æ¶ã€‘å’Œã€å‰§æœ¬åˆ†ç±»ã€‘,è¾“å‡ºåˆ†æç»“æœã€‚\n\
            \nã€æ•°æ®JSONã€‘(æ¥è‡ª Agent 3)\n{{#3001.text#}}\n\nã€æŠ€æœ¯é¢JSONã€‘(æ¥è‡ª Agent 4)\n{{#4001.text#}}\n\
            \nã€åˆ†æè§„åˆ™-å››ç»´è¯„åˆ†æ¡†æ¶ã€‘\n1.Gamma_Regimeåˆ¤å®šæƒé‡40%æœ€ä¼˜å…ˆ:ä»3001.text.targets.gamma_metricsæå–vol_triggerå’Œspot_vs_triggerã€‚è¿™æ˜¯æœ€å…³é”®çš„å¸‚åœºçŠ¶æ€åˆ¤æ–­ã€‚è‹¥spot_vs_trigger=aboveåˆ™ç°ä»·åœ¨VOL_TRIGGERä¸Šæ–¹ä¸ºæ­£Î³å€¾å‘,åšå¸‚å•†æä¾›æ­£Gammaå‹åˆ¶æ³¢åŠ¨,åŸºç¡€åœºæ™¯base_scenarioä¸ºåŒºé—´,regime_noteè¯´æ˜æ­£Î³å‹åˆ¶æ³¢åŠ¨ç»´æŒåŒºé—´ã€‚è‹¥spot_vs_trigger=belowåˆ™ç°ä»·åœ¨VOL_TRIGGERä¸‹æ–¹ä¸ºè´ŸÎ³å€¾å‘,åšå¸‚å•†æä¾›è´ŸGammaæ”¾å¤§æ³¢åŠ¨,åŸºç¡€åœºæ™¯ä¸ºè¶‹åŠ¿,regime_noteè¯´æ˜è´ŸÎ³æ”¾å¤§æ³¢åŠ¨è¶‹åŠ¿åŠ é€Ÿã€‚è‹¥spot_vs_trigger=nearåˆ™ä¸´ç•ŒçŠ¶æ€å¯èƒ½å‘ç”Ÿregimeåè½¬,åŸºç¡€åœºæ™¯ä¸ºè¿‡æ¸¡,regime_noteè¯´æ˜æ¥è¿‘Gammaç¿»è½¬çº¿é«˜æ³¢åŠ¨ã€‚æ­¤ç»´åº¦è¯„åˆ†gamma_regime_score:è‹¥æ˜ç¡®aboveæˆ–belowç»™6-8åˆ†,è‹¥nearç»™4-5åˆ†è­¦ç¤ºé£é™©ã€‚\n\
            2.ç ´å¢™å¯èƒ½æ€§è¯„ä¼°æƒé‡30%:ä» 3001.text.targets.gamma_metricsæå–gap_distance_em1_multiple,cluster_strength_ratio,monthly_cluster_overrideã€‚å…ˆåˆ¤æ–­é˜ˆå€¼:è‹¥monthly_cluster_override=trueåˆ™ç ´å¢™é˜ˆå€¼threshold=0.7å€EM1$å› æœˆåº¦ç°‡å¼ºåº¦â‰¥å‘¨åº¦1.5å€,å¦åˆ™threshold=1.0å€EM1$ã€‚è¯„ä¼°ç ´å¢™æ¦‚ç‡break_probability:è‹¥gap_distance_em1<thresholdä¸ºé«˜æ¦‚ç‡,è‹¥gap_distance_em1åœ¨thresholdåˆ°2.0ä¹‹é—´ä¸ºä¸­ç­‰æ¦‚ç‡,è‹¥>2.0ä¸ºä½æ¦‚ç‡ã€‚åŒæ—¶è€ƒè™‘cluster_strength_ratio:æ¯”å€¼è¶Šå¤§ä¸»å¢™è¶Šå¼ºç ´å¢™è¶Šéš¾,>2.0æ˜¾è‘—é™ä½ç ´å¢™æ¦‚ç‡,1.5-2.0ä¸ºä¸­ç­‰å¼ºåº¦,<1.5è¾ƒæ˜“çªç ´ã€‚è¾“å‡ºbreak_noteç»¼åˆè¯´æ˜éœ€å¤šå°‘å€EM1$è·ç¦»å’Œç°‡å¼ºåº¦æƒ…å†µã€‚æ­¤ç»´åº¦è¯„åˆ†break_wall_score:é«˜æ¦‚ç‡8-10åˆ†,ä¸­ç­‰5-7åˆ†,ä½æ¦‚ç‡2-4åˆ†,åŒæ—¶æŒ‰cluster_strengthè°ƒæ•´Â±1åˆ†ã€‚\n\
            3.æ–¹å‘ä¸€è‡´æ€§è¯„ä¼°æƒé‡20%:ä»3001.text.targets.directional_metricsæå–dex_same_dir_pct,vanna_dir,vanna_confidenceã€‚è®¡ç®—vanna_weightæƒé‡:è‹¥vanna_confidence=highåˆ™æƒé‡1.0,è‹¥mediumåˆ™0.7,è‹¥lowåˆ™0.4ã€‚åˆ¤æ–­æ–¹å‘ä¿¡å·direction_strength:è‹¥dex_same_dir>70ä¸”vanna_diræ˜ç¡®Upæˆ–Downä¸”vanna_weight>=0.7åˆ™ä¸ºå¼ºæ–¹å‘ä¿¡å·,è‹¥dex_same_diråœ¨50-70æˆ–vanna_weightä¸ºmediumåˆ™ä¸ºä¸­ç­‰ä¿¡å·,è‹¥dex_same_dir<50æˆ–vanna_confidence=lowåˆ™ä¸ºå¼±ä¿¡å·ã€‚æ­¤ç»´åº¦è¯„åˆ†direction_score:å¼ºä¿¡å·8-10åˆ†,ä¸­ç­‰5-7åˆ†,å¼±ä¿¡å·2-4åˆ†ã€‚\n\
            4.IVåŠ¨æ€æƒé‡10%:ä»3001.text.targets.directional_metricsæå–iv_path,iv_path_confidenceã€‚åˆ¤æ–­iv_signal:è‹¥iv_path=å‡ä¸”confidence=highæˆ–mediumåˆ™ä¸ºæ³¢åŠ¨ç‡æ‰©å¼ ä¿¡å·åˆ©å¤šæ³¢åŠ¨ç‡ç­–ç•¥,è‹¥iv_path=é™åˆ™ä¸ºæ³¢åŠ¨ç‡å‹ç¼©ä¿¡å·åˆ©ç©ºæ³¢åŠ¨ç‡,è‹¥iv_path=å¹³æˆ–æ•°æ®ä¸è¶³åˆ™ä¸­æ€§ã€‚æ­¤ç»´åº¦è¯„åˆ†iv_score:æ‰©å¼ ä¸”high\
            \ confidenceç»™8-10åˆ†,æ‰©å¼ mediumç»™6-7åˆ†,å‹ç¼©ç»™3-5åˆ†,å¹³æˆ–ä¸è¶³ç»™5-6åˆ†ã€‚\nã€ç»¼åˆè¯„åˆ†è®¡ç®—ã€‘æ€»åˆ†total_score=gamma_regime_scoreÃ—0.4+break_wall_scoreÃ—0.3+direction_scoreÃ—0.2+iv_scoreÃ—0.1ã€‚è¾“å‡ºweight_breakdownæ˜¾ç¤ºè®¡ç®—è¿‡ç¨‹å¦‚6Ã—0.4+3Ã—0.3+7Ã—0.2+6Ã—0.1=5.5ã€‚\n\
            ã€åœºæ™¯åˆ†ç±»è§„åˆ™ã€‘åŸºäºtotal_scoreå’Œgamma_regimeç»¼åˆåˆ¤å®š:è‹¥total_score>=7ä¸ºå¼ºä¿¡å·,è‹¥spot_vs_trigger=belowåˆ™primary_scenarioä¸ºå¼ºè¶‹åŠ¿ä¸Šè¡Œæˆ–ä¸‹è¡Œæ ¹æ®direction,è‹¥aboveåˆ™ä¸ºåŒºé—´çªç ´ã€‚è‹¥total_scoreåœ¨5-7ä¸ºä¸­ç­‰ä¿¡å·,è‹¥belowåˆ™ä¸ºå¼±è¶‹åŠ¿,è‹¥aboveåˆ™ä¸ºå®½å¹…åŒºé—´æˆ–å¼±çªç ´ã€‚è‹¥total_scoreåœ¨3-5ä¸ºå¼±ä¿¡å·,è‹¥aboveåˆ™ä¸ºåŒºé—´éœ‡è¡,è‹¥belowéœ€è­¦æƒ•ä½†ä¿¡å·ä¸è¶³ã€‚è‹¥total_score<3ä¸ºè§‚æœ›ä¸å»ºè®®å…¥åœºã€‚è¾“å‡ºscenario_probabilityä¸ºä¸»å¯¼åœºæ™¯æ¦‚ç‡ç™¾åˆ†æ¯”,è¾“å‡ºadjustment_noteè¯´æ˜å¦‚ä½•åŸºäºgamma_regimeè°ƒæ•´åˆ¤æ–­å¦‚è™½åœ¨æ­£Î³åŒºåŸŸä½†æ–¹å‘ä¿¡å·å¼ºè¯„ä¼°ä¸ºåŒºé—´çªç ´ã€‚\n\
            ã€å…¥åœºé—¨æ§›æ£€æŸ¥ã€‘entry_threshold_checkåˆ¤æ–­:æ€»åˆ†total_score>=3ä¸”è‡³å°‘æ»¡è¶³ä¸€ä¸ªå…³é”®ä¿¡å·æ¡ä»¶:æ¡ä»¶1 spot_vs_triggeræ˜ç¡®ä¸ºaboveæˆ–belowä¸æ˜¯near,æ¡ä»¶2\
            \ gap_distance_em1<2,æ¡ä»¶3 dex_same_dir>60,æ¡ä»¶4 vanna_confidenceä¸ºhighæˆ–mediumã€‚è‹¥æ»¡è¶³åˆ™entry_threshold_checkä¸ºå…¥åœº,å¦åˆ™ä¸ºè§‚æœ›æˆ–ç­‰å¾…ã€‚è¾“å‡ºentry_rationaleè¯¦ç»†è¯´æ˜ç†ç”±åˆ—å‡ºæ»¡è¶³çš„æ¡ä»¶å’Œä¸æ»¡è¶³çš„æ¡ä»¶ã€‚\n\
            ã€å…³é”®ä½æå–ã€‘ä»3001.text.targets[0].wallsæå–supportå³put_wall,resistanceå³call_wall,trigger_lineå³gamma_metrics.vol_triggerã€‚\n\
            \nã€è¾“å‡ºJSONæ ¼å¼ã€‘ä¸¥æ ¼ä»…è¾“å‡º JSON å¯¹è±¡:\n   \n{\n  \"gamma_regime\": {\n    \"vol_trigger\"\
            : 168.5,\n    \"spot_vs_trigger\": \"above\",\n    \"base_scenario\":\
            \ \"åŒºé—´\",\n    \"regime_note\": \"ç°ä»·170.0åœ¨VOL_TRIGGER 168.5ä¸Šæ–¹,æ­£Î³å€¾å‘,åšå¸‚å•†å‹åˆ¶æ³¢åŠ¨ç»´æŒåŒºé—´\"\
            \n  },\n  \"break_wall_assessment\": {\n    \"gap_distance_em1\": 3.34,\n\
            \    \"cluster_strength\": 1.8,\n    \"monthly_override\": false,\n  \
            \  \"threshold\": 1.0,\n    \"break_probability\": \"ä½\",\n    \"break_note\"\
            : \"éœ€3.34å€EM1$è·ç¦»åˆ°è¾¾Call Wall 180,ç°‡å¼ºåº¦1.8å€ä¸ºä¸­ç­‰å¼ºåº¦,ç ´å¢™éš¾åº¦ä¸­ç­‰åé«˜\"\n  },\n  \"directional_signals\"\
            : {\n    \"dex_same_dir\": 65.0,\n    \"vanna_dir\": \"up\",\n    \"vanna_confidence\"\
            : \"high\",\n    \"vanna_weight\": 1.0,\n    \"direction_strength\": \"\
            ä¸­ç­‰åå¼º\",\n    \"direction_note\": \"DEXåŒå‘65%ä¸­ç­‰,Vannaæ–¹å‘upä¸”ç½®ä¿¡åº¦highæƒé‡1.0,ç»¼åˆæ–¹å‘ä¿¡å·ä¸­ç­‰åå¼º\"\
            \n  },\n  \"iv_dynamics\": {\n    \"iv_path\": \"å‡\",\n    \"iv_path_confidence\"\
            : \"medium\",\n    \"iv_signal\": \"æ³¢åŠ¨ç‡æ‰©å¼ \",\n    \"iv_note\": \"IVè·¯å¾„æ˜¾ç¤ºå‡è¶‹åŠ¿,ç½®ä¿¡åº¦medium,æœ‰åˆ©äºLong\
            \ Volç­–ç•¥ä½†éœ€éªŒè¯\"\n  },\n  \"scoring\": {\n    \"gamma_regime_score\": 6,\n\
            \    \"gamma_regime_rationale\": \"æ˜ç¡®aboveçŠ¶æ€ç»™6åˆ†,énearæ•…ä¸æ‰£åˆ†\",\n    \"break_wall_score\"\
            : 3,\n    \"break_wall_rationale\": \"gap_distance 3.34>2.0ä¸ºä½ç ´å¢™æ¦‚ç‡ç»™3åˆ†,cluster\
            \ 1.8ä¸­ç­‰ä¸è°ƒæ•´\",\n    \"direction_score\": 7,\n    \"direction_rationale\"\
            : \"dex 65%ä¸­ç­‰+vanna upé«˜ç½®ä¿¡ç»¼åˆç»™7åˆ†\",\n    \"iv_score\": 6,\n    \"iv_score_rationale\"\
            : \"iv_pathå‡ä½†confidenceä»…mediumç»™6åˆ†\",\n    \"total_score\": 5.5,\n    \"\
            weight_breakdown\": \"6Ã—0.4+3Ã—0.3+7Ã—0.2+6Ã—0.1=2.4+0.9+1.4+0.6=5.5\"\n\
            \  },\n  \"scenario_classification\": {\n    \"primary_scenario\": \"\
            å¼±è¶‹åŠ¿ä¸Šè¡Œ\",\n    \"scenario_probability\": 55,\n    \"secondary_scenarios\"\
            : [\n      {\n        \"type\": \"å®½å¹…åŒºé—´\",\n        \"probability\": 30\n\
            \      },\n      {\n        \"type\": \"è§‚æœ›\",\n        \"probability\"\
            : 15\n      }\n    ],\n    \"adjustment_note\": \"è™½åœ¨æ­£Î³åŒºåŸŸbaseä¸ºåŒºé—´,ä½†direction_score\
            \ 7åˆ†æ–¹å‘ä¿¡å·ä¸­ç­‰åå¼º,gap_distance 3.34è™½å¤§ä½†vanna_dirä¸€è‡´æ€§å¼º,ç»¼åˆè¯„ä¼°ä¸ºå¼±è¶‹åŠ¿ä¸Šè¡Œæˆ–åŒºé—´çªç ´,æ¦‚ç‡55%\"\
            \n  },\n  \"entry_threshold_check\": \"å…¥åœº\",\n  \"entry_rationale\": \"\
            æ€»åˆ†5.5>=3æ»¡è¶³,å…³é”®ä¿¡å·:æ¡ä»¶1 spot_vs_trigger=aboveæ˜ç¡®æ»¡è¶³,æ¡ä»¶2 gap_distance_em1=3.34>2ä¸æ»¡è¶³,æ¡ä»¶3\
            \ dex_same_dir=65>60æ»¡è¶³,æ¡ä»¶4 vanna_confidence=highæ»¡è¶³ã€‚4ä¸ªæ¡ä»¶æ»¡è¶³3ä¸ª,ä¸”total_score>5,å»ºè®®å…¥åœºä½†é‡‡ç”¨ä¿å®ˆç­–ç•¥\"\
            ,\n  \"risk_warning\": \"gap_distanceåå¤§éœ€3.34å€EM1$æ‰èƒ½åˆ°é˜»åŠ›ä½,è‹¥çŸ­æœŸå†…æœªçªç ´éœ€è°ƒæ•´ä¸ºåŒºé—´ç­–ç•¥\"\
            ,\n  \"key_levels\": {\n    \"support\": 165.0,\n    \"resistance\": 180.0,\n\
            \    \"trigger_line\": 168.5,\n    \"current_spot\": 170.0\n  }\n}\n\n"
        - id: user-scenario
          role: user
          text: è¯·æ•´åˆæ•°æ®,è¿›è¡Œå‰§æœ¬æ¨æ¼”ä¸è¯„åˆ†ã€‚
        selected: false
        title: Agent 5 å‰§æœ¬åˆ†æ
        type: llm
        vision:
          enabled: false
      height: 132
      id: '5001'
      position:
        x: 1718.9514918530517
        y: 345.4727008545875
      positionAbsolute:
        x: 1718.9514918530517
        y: 345.4727008545875
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: 'Agent 6: Generate actionable strategies with RR/Pw.'
        model:
          completion_params: {}
          mode: chat
          name: gpt-5
          provider: langgenius/aihubmix/aihubmix
        prompt_template:
        - id: sys-strategy
          role: system
          text: "ä½ æ˜¯æœŸæƒç­–ç•¥ç ”ç©¶å‘˜ä¸æœŸæƒäº¤æ˜“æ•™ç»ƒï¼Œè´Ÿè´£æœŸæƒç­–ç•¥ç”Ÿæˆ Agentã€‚\nä»»åŠ¡:åŸºäºGamma Regimeå’Œå‰§æœ¬åˆ†ç±»ç”Ÿæˆä¸‰ç§é£é™©ç­‰çº§ç­–ç•¥å¹¶ç²¾ç¡®è®¡ç®—RRå’ŒPwã€‚ã€æ•°æ®JSONæ¥è‡ªAgent3ã€‘{{#3001.text#}}ã€å‰§æœ¬åˆ†æJSONæ¥è‡ªAgent5ã€‘{{#5001.text#}}\n\
            \nã€ç­–ç•¥æ˜ å°„è§„åˆ™ã€‘\n1.æ ¹æ®gamma_regimeå’Œscenario_classificationé€‰æ‹©ç­–ç•¥ç±»å‹:ä»5001.text.gamma_regimeæå–spot_vs_triggerå’Œbase_scenario,ä»5001.text.scenario_classificationæå–primary_scenarioã€‚è‹¥spot_vs_trigger=aboveä¸”primary_scenarioä¸ºåŒºé—´æˆ–å¼±è¶‹åŠ¿,é€‰æ‹©æ”¶å–æƒåˆ©é‡‘ç­–ç•¥:ä¿å®ˆä¸ºIron\
            \ Condoré“é¹°,å‡è¡¡ä¸ºIron Butterflyé“è¶,è¿›å–å¯ä¸ºBull Put Spreadæˆ–Bear Call Spreadã€‚è‹¥spot_vs_trigger=belowä¸”primary_scenarioä¸ºè¶‹åŠ¿ä¸Šè¡Œ,é€‰æ‹©æ–¹å‘æ€§ç­–ç•¥:ä¿å®ˆä¸ºBull\
            \ Call Spreadç‰›å¸‚ä»·å·®,å‡è¡¡ä¸ºCall Ratio Spreadæ¯”ç‡ä»·å·®,è¿›å–ä¸ºLong Call Verticalæˆ–Calendar\
            \ Spreadæ—¥å†ä»·å·®ã€‚è‹¥spot_vs_trigger=belowä¸”primary_scenarioä¸ºè¶‹åŠ¿ä¸‹è¡Œ,é€‰æ‹©Putæ–¹å‘ç­–ç•¥:ä¿å®ˆä¸ºBear\
            \ Put Spread,å‡è¡¡ä¸ºPut Ratio Spread,è¿›å–ä¸ºLong Put Verticalã€‚è‹¥spot_vs_trigger=nearæˆ–primary_scenarioä¸ºè¿‡æ¸¡è§‚æœ›,ä¸ç”Ÿæˆç­–ç•¥æˆ–ä»…å¯¹å†²ç­–ç•¥å¦‚Collarã€‚\n\
            2.è¡Œæƒä»·Strikeé€‰æ‹©è§„åˆ™:ä»3001.text.targetsæå–spot_price,walls.call_wall,walls.put_wall,walls.major_wall,gamma_metrics.gap_distance_em1_multiple,em1_dollarã€‚ä¿å®ˆç­–ç•¥å›´ç»•å¢™ä½æ„å»º:è‹¥Iron\
            \ Condoråˆ™Short Callè…¿åœ¨call_wallé™„è¿‘,Long Callåœ¨call_wall+1.5EM1$,Short Putè…¿åœ¨put_wallé™„è¿‘,Long\
            \ Putåœ¨put_wall-1.5EM1$ã€‚è‹¥Bull Call Spreadåˆ™Long Callåœ¨spotä¸call_wallä¸­ç‚¹,Short\
            \ Callåœ¨call_wallã€‚å‡è¡¡ç­–ç•¥ä»¥spotä¸ºä¸­å¿ƒ:è‹¥Iron Butterflyåˆ™Bodyåœ¨spot,ä¸¤ç¿¼Wingsåœ¨spotÂ±1EM1$ã€‚è‹¥æ¯”ç‡ä»·å·®Ratio\
            \ Spreadåˆ™å–æ–¹è…¿åœ¨spot+0.5EM1$,ä¹°æ–¹è…¿åœ¨spot+1.5EM1$,æ¯”ç‡1:2æˆ–2:3ã€‚è¿›å–ç­–ç•¥æ ¹æ®directioné€‰æ‹©:è‹¥çœ‹æ¶¨åˆ™Long\
            \ Callåœ¨spot+0.2EM1$æ¥è¿‘ç°ä»·,Short Callåœ¨major_wallç»™æœ€å¤§è·åˆ©ç©ºé—´ã€‚è‹¥Calendaråˆ™è¿‘æœˆShortåœ¨spot,è¿œæœˆLongåŒstrikeã€‚\n\
            3.æœŸé™DTEåŠ¨æ€é€‰æ‹©:ä»3001.text.targets.gamma_metricsæå–gap_distance_em1_multipleå’Œmonthly_cluster_overrideã€‚åŸºç¡€è§„åˆ™:è‹¥gap_distance_em1>3åˆ™DTE=14æ—¥ç»™è¶³æ—¶é—´,è‹¥2-3åˆ™DTE=10æ—¥,è‹¥<2åˆ™DTE=7æ—¥æ¥è¿‘åˆ°æœŸGammaæ›´å¤§ã€‚æœˆåº¦è°ƒæ•´:è‹¥monthly_cluster_override=trueåˆ™åœ¨åŸºç¡€DTEä¸Š+7æ—¥å³DTEå˜ä¸º14+7=21,10+7=17,7+7=14ä»¥åº”å¯¹æœˆåº¦ç°‡é˜»åŠ›ã€‚0DTEè§„é¿:ä¸é€‰æ‹©0DTEé™¤éspot_vs_trigger=nearä¸”gap_distance<0.5EM1$æ­¤æ—¶å¯ç”¨0DTEåšGamma\
            \ Scalpingä½†éœ€æ ‡æ³¨é«˜é£é™©ã€‚\n4.å¸Œè…Šå€¼Greeksç›®æ ‡è®¾å®š:ä¿å®ˆç­–ç•¥ç›®æ ‡Deltaæ¥è¿‘0åœ¨-0.1åˆ°0.1,Thetaä¸ºæ­£>5ä»£è¡¨æ—¶é—´ä»·å€¼è¡°å‡æ”¶ç›Š,Vegaä¸ºè´Ÿ<-10ä»£è¡¨åšç©ºæ³¢åŠ¨ç‡ã€‚å‡è¡¡ç­–ç•¥Deltaå…è®¸Â±0.2è½»å¾®æ–¹å‘æ•å£,Theta>8,Vegaæ¥è¿‘0å³-5åˆ°5æ³¢åŠ¨ç‡ä¸­æ€§ã€‚è¿›å–ç­–ç•¥Delta\
            \ 0.3-0.6æ˜ç¡®æ–¹å‘,Thetaå¯ä¸ºè´Ÿè‹¥ä¹°å…¥Longç­–ç•¥,Vega>10åšå¤šæ³¢åŠ¨ç‡ã€‚\n5.RRç›ˆäºæ¯”è®¡ç®—å…¬å¼:ä¿¡ç”¨ä»·å·®Credit\
            \ Spreadå¦‚Iron Condor:Cä¸ºæ”¶å–æƒåˆ©é‡‘Credit,Wä¸ºä»·å·®å®½åº¦Widthå³Longä¸Shortä¹‹é—´å·®ä»·ã€‚RR=C:(W-C)å³æ”¶å…¥æ¯”æœ€å¤§äºæŸã€‚ç¤ºä¾‹C=0.8,W=2.5åˆ™RR=0.8:(2.5-0.8)=0.8:1.7â‰ˆ1:2.1ã€‚å€Ÿè´·ä»·å·®Debit\
            \ Spreadå¦‚Bull Call Spread:Dä¸ºæ”¯ä»˜æƒåˆ©é‡‘Debit,Wä¸ºä»·å·®å®½åº¦ã€‚RR=(W-D):Då³æœ€å¤§è·åˆ©æ¯”æˆæœ¬ã€‚ç¤ºä¾‹D=2.5,W=7.5åˆ™RR=(7.5-2.5):2.5=5.0:2.5=2:1ã€‚è¶å¼Butterflyå’Œé“è¶Iron\
            \ Butterfly:max_profitä¸ºBodyå¤„æœ€å¤§åˆ©æ¶¦,max_lossä¸ºWingå¤„æœ€å¤§äºæŸã€‚RR=max_profit:max_lossé€šå¸¸åœ¨2:1åˆ°4:1ä¹‹é—´ã€‚\n\
            6.Pwèƒœç‡ä¼°è®¡å…¬å¼:ä¿¡ç”¨ä»·å·®Pwå…¬å¼:Pw=clamp(base+cluster_adj-distance_penalty,min,max)ã€‚base=0.5åŸºç¡€,cluster_adj=0.1Ã—cluster_strength_ratioç°‡å¼ºåº¦åŠ æˆ,distance_penalty=0.05Ã—gap_distance_em1_multipleè·ç¦»æƒ©ç½š,min=0.4,max=0.85ã€‚ç¤ºä¾‹cluster=1.8,gap=3.34åˆ™Pw=clamp(0.5+0.1Ã—1.8-0.05Ã—3.34,0.4,0.85)=clamp(0.5+0.18-0.167,0.4,0.85)=0.513çº¦51%ä½†è€ƒè™‘å…¶ä»–å› ç´ è°ƒæ•´åˆ°72%è‹¥æŠ€æœ¯é¢é…åˆã€‚å€Ÿè´·ä»·å·®Pwå…¬å¼:Pw=clamp(base+dex_adj+vanna_adj,min,max)ã€‚base=0.3,dex_adj=0.1Ã—dex_same_dir/100,vanna_adj=vanna_weightÃ—0.2,min=0.25,max=0.75ã€‚ç¤ºä¾‹dex=65,vanna_weight=1.0åˆ™Pw=clamp(0.3+0.1Ã—0.65+1.0Ã—0.2,0.25,0.75)=clamp(0.3+0.065+0.2,0.25,0.75)=0.565çº¦57%ã€‚è¶å¼PwåŸºäºspotåˆ°bodyä¸­å¿ƒè·ç¦»å’ŒIV:è‹¥spotåœ¨bodyå†…Pw=0.6-0.7,è‹¥spotåç¦»1EM1$åˆ™Pw=0.4-0.5ã€‚\n\
            ã€è¾“å‡ºJSONæ ¼å¼ã€‘è¾“å‡ºç­–ç•¥æ•°ç»„åŒ…å«ä¸‰ä¸ªå¯¹è±¡ä¿å®ˆå‡è¡¡è¿›å–:\n[\n  {\n    \"strategy_type\": \"ä¿å®ˆ\",\n\
            \    \"structure\": \"Iron Condor\",\n    \"description\": \"å››è…¿é“é¹°æ”¶å–æƒåˆ©é‡‘ç­–ç•¥é€‚åˆæ­£Î³åŒºé—´ç¯å¢ƒ\"\
            ,\n    \"legs\": [\n      {\n        \"action\": \"sell\",\n        \"\
            type\": \"call\",\n        \"strike\": 180.0,\n        \"quantity\": 1,\n\
            \        \"rationale\": \"Short Callåœ¨call_wallé˜»åŠ›ä½æ”¶å–æƒåˆ©é‡‘\"\n      },\n \
            \     {\n        \"action\": \"buy\",\n        \"type\": \"call\",\n \
            \       \"strike\": 182.5,\n        \"quantity\": 1,\n        \"rationale\"\
            : \"Long Callä¿æŠ¤ä¸Šè¡Œé£é™©åœ¨call_wall+1EM1$\"\n      },\n      {\n        \"action\"\
            : \"sell\",\n        \"type\": \"put\",\n        \"strike\": 165.0,\n\
            \        \"quantity\": 1,\n        \"rationale\": \"Short Putåœ¨put_wallæ”¯æ’‘ä½æ”¶å–æƒåˆ©é‡‘\"\
            \n      },\n      {\n        \"action\": \"buy\",\n        \"type\": \"\
            put\",\n        \"strike\": 162.5,\n        \"quantity\": 1,\n       \
            \ \"rationale\": \"Long Putä¿æŠ¤ä¸‹è¡Œé£é™©åœ¨put_wall-1EM1$\"\n      }\n    ],\n\
            \    \"dte\": 14,\n    \"dte_rationale\": \"gap_distance_em1=3.34>3é€‰æ‹©14æ—¥DTE,monthly_cluster_override=falseæ— éœ€å»¶é•¿\"\
            ,\n    \"greeks_target\": {\n      \"delta\": 0.05,\n      \"delta_note\"\
            : \"æ¥è¿‘ä¸­æ€§ç•¥åå¤š\",\n      \"theta\": 8.5,\n      \"theta_note\": \"æ¯æ—¥æ—¶é—´ä»·å€¼è¡°å‡æ”¶ç›Š\"\
            ,\n      \"vega\": -12.0,\n      \"vega_note\": \"åšç©ºæ³¢åŠ¨ç‡åœ¨æ­£Î³ç¯å¢ƒæœ‰åˆ©\"\n   \
            \ },\n    \"rr_calculation\": {\n      \"credit\": 0.8,\n      \"width_call\"\
            : 2.5,\n      \"width_put\": 2.5,\n      \"max_profit\": 0.8,\n      \"\
            max_loss\": 1.7,\n      \"rr_ratio\": \"1:2.1\",\n      \"formula\": \"\
            Credit=0.8,Width=2.5,MaxLoss=Width-Credit=1.7,RR=0.8:1.7\",\n      \"\
            rr_note\": \"æ¯æ”¶0.8æƒåˆ©é‡‘é£é™©1.7,ç›ˆäºæ¯”1:2.1é€‚åˆé«˜èƒœç‡ç­–ç•¥\"\n    },\n    \"pw_calculation\"\
            : {\n      \"base\": 0.5,\n      \"cluster_strength\": 1.8,\n      \"\
            cluster_adj\": 0.18,\n      \"gap_distance_em1\": 3.34,\n      \"distance_penalty\"\
            : 0.167,\n      \"technical_boost\": 0.15,\n      \"pw_raw\": 0.513,\n\
            \      \"pw_adjusted\": 0.72,\n      \"pw_estimate\": \"72%\",\n     \
            \ \"formula\": \"base 0.5+cluster 0.1Ã—1.8-distance 0.05Ã—3.34+technical\
            \ 0.15=0.663å–0.72\",\n      \"pw_note\": \"ç°‡å¼ºåº¦1.8å€ä¸­ç­‰,gapè·ç¦»3.34åå¤§æ‰£åˆ†,æŠ€æœ¯é¢é…åˆdex\
            \ 65%å’Œvanna upåŠ åˆ†,ç»¼åˆèƒœç‡72%\"\n    },\n    \"entry_trigger\": \"Spotåœ¨168-172åŒºé—´å¾˜å¾Š,IVæœªæ˜¾è‘—ä¸Šå‡,dex_same_dirç»´æŒ>60%\"\
            ,\n    \"entry_timing\": \"æ¬¡æ—¥å¼€ç›˜å15-30åˆ†é’Ÿç¡®è®¤æ–¹å‘,é¿å¼€ç›˜å‰è·³ç©º\",\n    \"exit_plan\"\
            : {\n      \"profit_target\": \"æƒåˆ©é‡‘è¡°å‡è‡³å‰©ä½™30%å³è·åˆ©70%æ—¶å¹³ä»“,çº¦æŒæœ‰7-10æ—¥\",\n   \
            \   \"stop_loss\": \"ä»»ä¸€è…¿è¢«çªç ´å³Spotçªç ´182.5æˆ–è·Œç ´162.5,æˆ–äºæŸè¾¾æƒåˆ©é‡‘150%æ—¶æ­¢æŸ\",\n  \
            \    \"time_decay\": \"æŒæœ‰è‡³åˆ°æœŸå‰3æ—¥,è‹¥æœªè¾¾ç›®æ ‡åˆ™åœ¨åˆ°æœŸå‰2æ—¥å¹³ä»“é¿å…Pin Risk\",\n      \"\
            adjustment\": \"è‹¥Spotæ¥è¿‘wingè¾¹ç•Œæå‰rollæˆ–closeè¯¥ä¾§é™ä½é£é™©\"\n    },\n    \"risk_note\"\
            : \"æœ€å¤§é£é™©1.7å€äºæƒåˆ©é‡‘0.8,éœ€ä¸¥æ ¼æ­¢æŸ,é€‚åˆè´¦æˆ·2%é£é™©æ•å£\"\n  },\n  {\n    \"strategy_type\"\
            : \"å‡è¡¡\",\n    \"structure\": \"Iron Butterfly\",\n    \"description\"\
            : \"å››è…¿é“è¶Bodyåœ¨ç°ä»·æ”¶å–æ›´å¤šæƒåˆ©é‡‘ä½†éœ€Spotç»´æŒçª„å¹…\",\n    \"legs\": [\n      {\n      \
            \  \"action\": \"sell\",\n        \"type\": \"call\",\n        \"strike\"\
            : 170.0,\n        \"quantity\": 1\n      },\n      {\n        \"action\"\
            : \"buy\",\n        \"type\": \"call\",\n        \"strike\": 173.0,\n\
            \        \"quantity\": 1\n      },\n      {\n        \"action\": \"sell\"\
            ,\n        \"type\": \"put\",\n        \"strike\": 170.0,\n        \"\
            quantity\": 1\n      },\n      {\n        \"action\": \"buy\",\n     \
            \   \"type\": \"put\",\n        \"strike\": 167.0,\n        \"quantity\"\
            : 1\n      }\n    ],\n    \"dte\": 10,\n    \"dte_rationale\": \"gap_distance\
            \ 3.34åœ¨2-3æ¡£é€‰10æ—¥DTE\",\n    \"greeks_target\": {\n      \"delta\": 0.1,\n\
            \      \"theta\": 12.0,\n      \"vega\": -8.0\n    },\n    \"rr_calculation\"\
            : {\n      \"credit\": 1.5,\n      \"wing_width\": 3.0,\n      \"max_profit\"\
            : 1.5,\n      \"max_loss\": 1.5,\n      \"rr_ratio\": \"1:1\",\n     \
            \ \"formula\": \"Credit=1.5,Width=3.0,MaxLoss=Width-Credit=1.5,RR=1:1\"\
            \n    },\n    \"pw_calculation\": {\n      \"body_distance\": 0.0,\n \
            \     \"iv_level\": \"medium\",\n      \"pw_estimate\": \"65%\",\n   \
            \   \"formula\": \"Spotåœ¨Bodyå†…åŸºç¡€Pw 0.65,gapè·ç¦»ä¸­ç­‰,IVå‡è¶‹åŠ¿ç•¥ä¸åˆ©\",\n      \"pw_note\"\
            : \"éœ€Spotåœ¨167-173çª„å¹…3EM1$å†…ç»´æŒ,gap 3.34åˆ°call_wallåå¤§ä½†bodyå®½åº¦ç»™ç¼“å†²\"\n    },\n\
            \    \"entry_trigger\": \"Spotåœ¨169-171çª„å¹…æ³¢åŠ¨,IVç¨³å®šæœªæ‰©å¼ ,æ³¢åŠ¨ç‡<EM1$\",\n    \"\
            exit_plan\": {\n      \"profit_target\": \"æƒåˆ©é‡‘è¡°å‡è‡³å‰©ä½™20%å³è·åˆ©80%\",\n    \
            \  \"stop_loss\": \"Spotçªç ´bodyÂ±0.5EM1$å³<169.5æˆ–>170.5æ—¶æ­¢æŸ\",\n      \"time_decay\"\
            : \"æŒæœ‰è‡³åˆ°æœŸå‰5æ—¥\"\n    },\n    \"risk_note\": \"éœ€Spoté«˜åº¦ç»´æŒåœ¨body,é€‚åˆæä½æ³¢åŠ¨ç¯å¢ƒ\"\
            \n  },\n  {\n    \"strategy_type\": \"è¿›å–\",\n    \"structure\": \"Bull\
            \ Call Spread\",\n    \"description\": \"ç‰›å¸‚ä»·å·®çœ‹æ¶¨æ–¹å‘ç­–ç•¥åŸºäºdexå’Œvannaä¸€è‡´æ€§\",\n\
            \    \"legs\": [\n      {\n        \"action\": \"buy\",\n        \"type\"\
            : \"call\",\n        \"strike\": 172.5,\n        \"quantity\": 1,\n  \
            \      \"rationale\": \"Long Callåœ¨spot+0.8EM1$æ¥è¿‘ç°ä»·è·å–Delta\"\n      },\n\
            \      {\n        \"action\": \"sell\",\n        \"type\": \"call\",\n\
            \        \"strike\": 180.0,\n        \"quantity\": 1,\n        \"rationale\"\
            : \"Short Callåœ¨call_wallé™ä½æˆæœ¬é™åˆ¶æœ€å¤§è·åˆ©\"\n      }\n    ],\n    \"dte\": 14,\n\
            \    \"dte_rationale\": \"gap 3.34éœ€14æ—¥æ—¶é—´åˆ°è¾¾ç›®æ ‡\",\n    \"greeks_target\"\
            : {\n      \"delta\": 0.45,\n      \"delta_note\": \"æ˜ç¡®çœ‹æ¶¨æ–¹å‘\",\n     \
            \ \"theta\": -3.0,\n      \"theta_note\": \"ä¹°å…¥ç­–ç•¥æ—¶é—´è¡°å‡ä¸ºè´Ÿä½†å¯æ¥å—\",\n      \"\
            vega\": 15.0,\n      \"vega_note\": \"åšå¤šæ³¢åŠ¨ç‡,IVå‡æœ‰åˆ©\"\n    },\n    \"rr_calculation\"\
            : {\n      \"debit\": 2.5,\n      \"width\": 7.5,\n      \"max_profit\"\
            : 5.0,\n      \"max_loss\": 2.5,\n      \"rr_ratio\": \"2:1\",\n     \
            \ \"formula\": \"Debit=2.5,Width=7.5,MaxProfit=Width-Debit=5.0,RR=5.0:2.5=2:1\"\
            ,\n      \"rr_note\": \"æ¯æŠ•å…¥2.5å¯è·åˆ©5.0,ç›ˆäºæ¯”2:1,é€‚åˆä¸­ç­‰èƒœç‡æ–¹å‘ç­–ç•¥\"\n    },\n   \
            \ \"pw_calculation\": {\n      \"base\": 0.3,\n      \"dex_same_dir\"\
            : 65.0,\n      \"dex_adj\": 0.065,\n      \"vanna_dir\": \"up\",\n   \
            \   \"vanna_weight\": 1.0,\n      \"vanna_adj\": 0.2,\n      \"technical_confluence\"\
            : 0.1,\n      \"pw_raw\": 0.565,\n      \"pw_adjusted\": 0.58,\n     \
            \ \"pw_estimate\": \"58%\",\n      \"formula\": \"base 0.3+dex 0.1Ã—0.65+vanna\
            \ 1.0Ã—0.2+technical 0.1=0.665ä½†gapåå¤§ä¸‹è°ƒåˆ°0.58\",\n      \"pw_note\": \"dex\
            \ 65%ä¸­ç­‰,vanna upé«˜ç½®ä¿¡,æ–¹å‘ä¿¡å·ä¸­ç­‰åå¼º,ä½†gap 3.34éœ€è¾ƒå¤§æ³¢åŠ¨æ•…èƒœç‡58%ç•¥é«˜äº50%\"\n    },\n  \
            \  \"entry_trigger\": \"Spotçªç ´172å¹¶ç»´æŒ,dex_same_dir>60%,vanna_dirç»´æŒup\"\
            ,\n    \"entry_timing\": \"ç­‰å¾…Spotç«™ç¨³172ä¸Šæ–¹,æˆäº¤é‡ç¡®è®¤\",\n    \"exit_plan\":\
            \ {\n      \"profit_target\": \"åˆ°è¾¾177.5å³ä»·å·®è·åˆ©50%å¹³ä»“,æˆ–åˆ°è¾¾179è·åˆ©80%\",\n   \
            \   \"stop_loss\": \"Spotå›è½è‡³170ä¸‹æ–¹æˆ–vanna_diråè½¬ä¸ºdownæ—¶æ­¢æŸ,äºæŸè¾¾æˆæœ¬50%\",\n  \
            \    \"time_decay\": \"æŒæœ‰è‡³åˆ°æœŸå‰5æ—¥,è‹¥æœªå¯åŠ¨åˆ™æ­¢æŸ\"\n    },\n    \"risk_note\":\
            \ \"æ–¹å‘æ€§ç­–ç•¥éœ€Spoté…åˆ,gap 3.34åå¤§éœ€è¾ƒå¼ºåŠ¨èƒ½,é€‚åˆè´¦æˆ·3%é£é™©æ•å£\",\n    \"monitoring\": \"\
            æ¯æ—¥ç›‘æ§dex_same_dirè‹¥é™è‡³<50%éœ€è­¦æƒ•æ–¹å‘åè½¬\"\n  }\n]"
        - id: user-strategy
          role: user
          text: è¯·æ ¹æ®åˆ†æç»“æœ,ç”Ÿæˆå¸¦RR/Pwçš„ç­–ç•¥ã€‚
        selected: false
        title: Agent 6 ç­–ç•¥ç”Ÿæˆ
        type: llm
        vision:
          enabled: false
      height: 132
      id: '6001'
      position:
        x: 2037.7138935288722
        y: 245.03910504218067
      positionAbsolute:
        x: 2037.7138935288722
        y: 245.03910504218067
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: 'Agent 7: Assemble the final report based on the template.'
        model:
          completion_params:
            temperature: 0.5
          mode: chat
          name: gpt-4o-mini
          provider: langgenius/aihubmix/aihubmix
        prompt_template:
        - id: sys-report
          role: system
          text: "ä½ æ˜¯æœ€ç»ˆæŠ¥å‘Šç”Ÿæˆ Agentã€‚\nä½ çš„ä»»åŠ¡æ˜¯æ±‡æ€»æ‰€æœ‰ä¸Šæ¸¸ Agent çš„ JSON è¾“å‡º,å¹¶ä¸¥æ ¼æŒ‰ç…§ã€è¾“å‡ºæ¨¡æ¿ã€‘ç”Ÿæˆä¸€ä»½ç»™ç”¨æˆ·çš„ã€äººç±»å¯è¯»çš„\
            \ Markdown æŠ¥å‘Šã€‚\n\nã€æ•°æ®JSONã€‘(æ¥è‡ª Agent 3)\n{{#3001.text#}}\n\nã€æŠ€æœ¯é¢JSONã€‘(æ¥è‡ª\
            \ Agent 4)\n{{#4001.text#}}\n\nã€å‰§æœ¬åˆ†æJSONã€‘(æ¥è‡ª Agent 5)\n{{#5001.text#}}\n\
            \nã€ç­–ç•¥JSONã€‘(æ¥è‡ª Agent 6)\n{{#6001.text#}}\n\nã€è¾“å‡ºæ¨¡æ¿ã€‘\n# ç¾è‚¡æœŸæƒåˆ†ææŠ¥å‘Š\n\n## 1.\
            \ ç»¼åˆè¯„åˆ†ä¸ç»“è®º\n\nä»5001.text.scoringæå–:\n\n### æ€»åˆ†: {total_score}/10\n\n**è¯„åˆ†æ„æˆ**\
            \ ({weight_breakdown}):\n- Gamma Regime: {gamma_regime_score}/10 (æƒé‡40%)\n\
            - ç ´å¢™å¯èƒ½æ€§: {break_wall_score}/10 (æƒé‡30%)\n- æ–¹å‘ä¸€è‡´æ€§: {direction_score}/10\
            \ (æƒé‡20%)\n- IVåŠ¨æ€: {iv_score}/10 (æƒé‡10%)\n\n### æ ¸å¿ƒåˆ¤æ–­\n\nä»5001.text.gamma_regimeå’Œscenario_classificationæå–:\n\
            \n**Gamma RegimeçŠ¶æ€**:\n- VOL TRIGGER = {vol_trigger}\n- ç°ä»·ä½ç½®: {spot_vs_trigger}\
            \ ({base_scenario})\n- è§£è¯»: {regime_note}\n\n**å¸‚åœºç»“è®º**:\n- ä¸»å¯¼åœºæ™¯: {primary_scenario}\
            \ (æ¦‚ç‡{scenario_probability}%)\n- è°ƒæ•´è¯´æ˜: {adjustment_note}\n\n**å…¥åœºåˆ¤æ–­**:\
            \ {entry_threshold_check}\n**ç†ç”±**: {entry_rationale}\n\n---\n\n## 2. å‰§æœ¬åˆ†ç±»ä¸æ¦‚ç‡\
            \ \n\nä»5001.textè¯¦ç»†æå–:\n\n### 2.1 ç ´å¢™è¯„ä¼°\n- å¢™è·: {break_wall_assessment.gap_distance_em1}å€EM1$\n\
            - ç°‡å¼ºåº¦: {cluster_strength}\n- ç ´å¢™æ¦‚ç‡: {break_probability}\n- {break_note}\n\
            \n### 2.2 æ–¹å‘ä¿¡å·\n- DEXåŒå‘: {directional_signals.dex_same_dir}%\n- Vanna:\
            \ {vanna_dir} (ç½®ä¿¡åº¦{vanna_confidence})\n- æ–¹å‘å¼ºåº¦: {direction_strength}\n\n\
            ### 2.3 åœºæ™¯æ¦‚ç‡åˆ†å¸ƒ\nä»scenario_classification.secondary_scenariosæå–:\n- {primary_scenario}:\
            \ {scenario_probability}%\né€ä¸€åˆ—å‡ºæ¬¡è¦åœºæ™¯çš„typeå’Œprobability\n\n---\n\n## 3. ç­–ç•¥å»ºè®®\n\
            \nä»6001.textæ•°ç»„æå–,æ¯ä¸ªç­–ç•¥è¾“å‡º:\n\n### 3.{N} {strategy_type}ç­–ç•¥\n\n**ç»“æ„**: {structure}\n\
            \n**è…¿éƒ¨**:\nä»legsæ•°ç»„ç®€åŒ–è¾“å‡º:\n- {action} {quantity}x {type}@{strike}\nä¾æ¬¡åˆ—å‡ºæ‰€æœ‰è…¿\n\
            \n**æœŸé™**: {dte}æ—¥\n\n**ç›ˆäºæ¯”**: {rr_calculation.rr_ratio}\n**èƒœç‡**: {pw_calculation.pw_estimate}\n\
            \n**å¸Œè…Šå€¼**: Delta {greeks_target.delta} | Theta {greeks_target.theta} |\
            \ Vega {greeks_target.vega}\n\n**å…¥åœº**: {entry_trigger}\n**æ­¢ç›ˆ**: {exit_plan.profit_target}\n\
            **æ­¢æŸ**: {exit_plan.stop_loss}\n\n---\n\n## 4. æ‰§è¡ŒSOP \n### å…¥åœºæ£€æŸ¥\nâœ“ æ—¶æœº:\
            \ æ¬¡æ—¥å¼€ç›˜å15-30åˆ†é’Ÿ\nâœ“ ç¡®è®¤: Spotåœ¨é¢„æœŸåŒºé—´,IVæœªå¼‚å¸¸æ³¢åŠ¨\nâœ“ ä»“ä½: å•ç¬”â‰¤2%,æ€»æ•å£â‰¤10%\n\n### æ­¢æŸè§¦å‘\n\
            ç«‹å³å¹³ä»“æ¡ä»¶:\n- Spotç©¿è¶ŠVOL_TRIGGER (Gamma regimeåè½¬)\n- è¾¾åˆ°ç­–ç•¥æ­¢æŸç‚¹\n- gap_distance<0.5EM1$\
            \ (æ¥è¿‘å¢™ä½)\n- vanna_diråè½¬\n- dex_same_dir<40%\n\n### æ—¥å¸¸ç›‘æ§\næ¯æ—¥ç›˜å‰:\n- æ£€æŸ¥VOL_TRIGGERæ›´æ–°\n\
            - ç¡®è®¤spot_vs_triggerçŠ¶æ€\n\nç›˜ä¸­å…³æ³¨:\n- gap_distanceå®æ—¶å˜åŒ–\n- DEXåŒå‘æ€§æ˜¯å¦ç»´æŒ\n- IVæ˜¯å¦æ‰©å¼ >50%\n\
            \n---\n\n## 5. æ•°æ®æ ¡éªŒå­—æ®µ (è¯¦ç»†)\n\nä»3001.text.targetsæå–æ‰€æœ‰å­—æ®µ:\n\n### æ ¸å¿ƒå­—æ®µ\n\
            ```\nSymbol: {symbol}\nSpot: {spot_price}\nEM1$: {em1_dollar}\n\nVOL_TRIGGER:\
            \ {gamma_metrics.vol_trigger}\nspot_vs_trigger: {gamma_metrics.spot_vs_trigger}\n\
            NET_GEX: {gamma_metrics.net_gex}\nnet_gex_sign: {gamma_metrics.net_gex_sign}\n\
            \nCall_Wall: {walls.call_wall}\nPut_Wall: {walls.put_wall}\nMajor_Wall:\
            \ {walls.major_wall} ({walls.major_wall_type})\n\ngap_distance: {gamma_metrics.gap_distance_dollar}\
            \ ({gamma_metrics.gap_distance_em1_multiple}x EM1$)\ncluster_strength:\
            \ {gamma_metrics.cluster_strength_ratio}\nmonthly_override: {gamma_metrics.monthly_cluster_override}\n\
            \ndex_same_dir: {directional_metrics.dex_same_dir_pct}%\nvanna_dir: {directional_metrics.vanna_dir}\
            \ (confidence: {directional_metrics.vanna_confidence})\niv_path: {directional_metrics.iv_path}\
            \ (confidence: {directional_metrics.iv_path_confidence})\n\nATM_IV_7D:\
            \ {atm_iv.iv_7d}\nATM_IV_14D: {atm_iv.iv_14d}\niv_source: {atm_iv.iv_source}\n\
            ```\n\n### æŒ‡æ•°èƒŒæ™¯\n```\nSPX NET_GEX: {indices.spx.net_gex_idx}\nSPX EM1$:\
            \ {indices.spx.em1_dollar_idx}\n```\n\n### æ•°æ®è´¨é‡\n- å®Œæ•´åº¦: {validation_summary.completion_rate}%\n\
            - ç¼ºå¤±å­—æ®µ: {validation_summary.missing_count}ä¸ª\n- æ—¶é—´æˆ³: {timestamp}\n\n"
        - id: user-report
          role: user
          text: è¯·æ±‡æ€»æ‰€æœ‰åˆ†æ,ç”Ÿæˆæœ€ç»ˆæŠ¥å‘Šã€‚
        selected: false
        title: Agent 7 æœ€ç»ˆæŠ¥å‘Š
        type: llm
        vision:
          enabled: false
      height: 132
      id: '7001'
      position:
        x: 2381.844113499949
        y: 245.03910504218067
      positionAbsolute:
        x: 2381.844113499949
        y: 245.03910504218067
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: '{{#7001.text#}}'
        desc: ''
        selected: false
        title: ğŸ“ˆ å›å¤æœ€ç»ˆåˆ†ææŠ¥å‘Š
        type: answer
      height: 103
      id: '7002'
      position:
        x: 2697.500460209588
        y: 245.03910504218067
      positionAbsolute:
        x: 2697.500460209588
        y: 245.03910504218067
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    viewport:
      x: -522.5157036447893
      y: 214.50811995991825
      zoom: 0.5726353502106728
  rag_pipeline_variables: []