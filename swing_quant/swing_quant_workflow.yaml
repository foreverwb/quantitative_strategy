app:
  description: 'è¾“å…¥1-3ä¸ªç¾è‚¡ä»£ç è·å–å‘½ä»¤æ¸…å•,æˆ–å›ä¼ æ•°æ®è·å–å®Œæ•´åˆ†æã€‚'
  icon: 'ğŸ¤–'
  icon_background: '#FCE7F3'
  mode: advanced-chat
  name: 'swing'
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/openai:0.2.5@373362a028986aae53a7baf73a7f11991ba3c22c69eaf97d6cde048cfd4a9f98
kind: app
version: 0.4.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      enabled: false
    opening_statement: "ä½ å¥½!æˆ‘æ˜¯æ‚¨çš„ç¾è‚¡æœŸæƒåˆ†æå¸ˆã€‚è¯·è¾“å…¥1-3ä¸ªç¾è‚¡ä»£ç (ä¾‹å¦‚:AAPL æˆ– NVDA, TSLA)"
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions:
    - "AAPL"
    - "NVDA, TSLA"
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
  graph:
    edges:
    # 1. Start -> Router
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: llm
      id: edge-1001-1002
      selected: false
      source: '1001'
      sourceHandle: source
      target: '1002'
      targetHandle: target
      type: custom
      zIndex: 0
    
    # 2. Router -> Main Hub
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: if-else
      id: edge-1002-1003
      selected: false
      source: '1002'
      sourceHandle: source
      target: '1003'
      targetHandle: target
      type: custom
      zIndex: 0
      
    # 3. Path A: Invalid
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: answer
      id: edge-1003-2001
      selected: false
      source: '1003'
      sourceHandle: source
      target: '2001'
      targetHandle: target
      type: custom
      zIndex: 0

    # 4. Path B: Ticker Input
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: edge-1003-2002
      selected: false
      source: '1003'
      sourceHandle: source
      target: '2002'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: edge-2002-2003
      selected: false
      source: '2002'
      sourceHandle: source
      target: '2003'
      targetHandle: target
      type: custom
      zIndex: 0

    # 5. Path C: Data Input -> Validation
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: edge-1003-3001
      selected: false
      source: '1003'
      sourceHandle: source
      target: '3001'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: if-else
      id: edge-3001-3002
      selected: false
      source: '3001'
      sourceHandle: source
      target: '3002'
      targetHandle: target
      type: custom
      zIndex: 0
      
    # 6. Path C.1: Missing Data
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: answer
      id: edge-3002-3003
      selected: false
      source: '3002'
      sourceHandle: source
      target: '3003'
      targetHandle: target
      type: custom
      zIndex: 0
      
    # 7. Path C.2: Analysis Chain
    # Validation -> TA
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: edge-3002-4001
      selected: false
      source: '3002'
      sourceHandle: source
      target: '4001'
      targetHandle: target
      type: custom
      zIndex: 0
    # TA -> Scenario
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: llm
      id: edge-4001-5001
      selected: false
      source: '4001'
      sourceHandle: source
      target: '5001'
      targetHandle: target
      type: custom
      zIndex: 0
    # Validation -> Scenario
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: llm
      id: edge-3001-5001
      selected: false
      source: '3001'
      sourceHandle: source
      target: '5001'
      targetHandle: target
      type: custom
      zIndex: 0
    # Scenario -> Strategy
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: llm
      id: edge-5001-6001
      selected: false
      source: '5001'
      sourceHandle: source
      target: '6001'
      targetHandle: target
      type: custom
      zIndex: 0
    # Validation -> Strategy
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: llm
      id: edge-3001-6001
      selected: false
      source: '3001'
      sourceHandle: source
      target: '6001'
      targetHandle: target
      type: custom
      zIndex: 0
    # Strategy -> Report
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: llm
      id: edge-6001-7001
      selected: false
      source: '6001'
      sourceHandle: source
      target: '7001'
      targetHandle: target
      type: custom
      zIndex: 0
    # Scenario -> Report
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: llm
      id: edge-5001-7001
      selected: false
      source: '5001'
      sourceHandle: source
      target: '7001'
      targetHandle: target
      type: custom
      zIndex: 0
    # TA -> Report
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: llm
      id: edge-4001-7001
      selected: false
      source: '4001'
      sourceHandle: source
      target: '7001'
      targetHandle: target
      type: custom
      zIndex: 0
    # Validation -> Report
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: llm
      id: edge-3001-7001
      selected: false
      source: '3001'
      sourceHandle: source
      target: '7001'
      targetHandle: target
      type: custom
      zIndex: 0
    # Report -> Final Answer
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: answer
      id: edge-7001-7002
      selected: false
      source: '7001'
      sourceHandle: source
      target: '7002'
      targetHandle: target
      type: custom
      zIndex: 0

    nodes:
    # --------------------------------------------------
    # 1. START NODE
    # --------------------------------------------------
    - data:
        desc: ''
        selected: false
        title: user input
        type: start
        variables:
        - label: query
          max_length: 15000
          options: []
          required: true
          type: text-input
          variable: query
      height: 94
      id: '1001'
      position:
        x: 30
        y: 300
      positionAbsolute:
        x: 30
        y: 300
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242

    # --------------------------------------------------
    # 2. AGENT 1: Triage Router
    # --------------------------------------------------
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: 'Detects if input is tickers or data.'
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: claude-3-haiku-20240307
          provider: anthropic
        prompt_template:
        - id: "sys-router"
          role: system
          text: |
            ä½ æ˜¯ä¸€ä¸ªè·¯ç”±åŠ©æ‰‹ã€‚ä½ çš„å”¯ä¸€ä»»åŠ¡æ˜¯åˆ¤æ–­ç”¨æˆ·è¾“å…¥å±äºä»¥ä¸‹å“ªä¸€ç±»,å¹¶ä»…è¾“å‡º "TICKER", "DATA", æˆ– "INVALID"ã€‚
            
            1. "TICKER": å¦‚æœæ¶ˆæ¯ä¸­åŒ…å«1-3ä¸ªç¬¦åˆç¾è‚¡ä»£ç æ ¼å¼çš„å­—ç¬¦ä¸²(ä¾‹å¦‚:AAPL, MSFT, "amzn us", "tsla"),å¹¶ä¸”ä¸åŒ…å« "!gexr" æˆ– "SPOT PRICE" ç­‰æ•°æ®ç‰¹å¾ã€‚
               - æ­£åˆ™(å‚è€ƒ):(^|[^A-Z])([A-Za-z]{1,5})(?:\s*,\s*([A-Za-z]{1,5})){0,2}([^A-Z]|$)
            
            2. "DATA": å¦‚æœæ¶ˆæ¯ä¸­åŒ…å«æ•°æ®ç‰¹å¾è¯,å¦‚ "!gexr", "!skew", "SPOT PRICE", "Call Wall", "EM1$" ç­‰ã€‚
            
            3. "INVALID": å…¶ä»–æ‰€æœ‰æƒ…å†µã€‚
            
            ã€ä½ çš„åˆ¤æ–­ã€‘(TICKER, DATA, or INVALID)
        - id: "user-router"
          role: user
          text: '{{#1001.query#}}'
        selected: false
        title: Agent 1 è·¯ç”±
        type: llm
        vision:
          enabled: false
      height: 94
      id: '1002'
      position:
        x: 330
        y: 300
      positionAbsolute:
        x: 330
        y: 300
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242

    # --------------------------------------------------
    # 3. ROUTER NODE: Splits the workflow
    # --------------------------------------------------
    - data:
        cases:
        - case_id: case-ticker
          conditions:
          - comparison_operator: contains
            id: cond-ticker
            value: TICKER
            variable_selector:
            - '1002'
            - text
          logical_operator: and
        - case_id: case-data
          conditions:
          - comparison_operator: contains
            id: cond-data
            value: DATA
            variable_selector:
            - '1002'
            - text
          logical_operator: and
        - case_id: case-invalid
          conditions:
          - comparison_operator: contains
            id: cond-invalid
            value: INVALID
            variable_selector:
            - '1002'
            - text
          logical_operator: and
        desc: ''
        selected: false
        title: æ„å›¾åˆ†æ”¯
        type: if-else
      height: 94
      id: '1003'
      position:
        x: 630
        y: 300
      positionAbsolute:
        x: 630
        y: 300
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242

    # --------------------------------------------------
    # 4. PATH A: INVALID
    # --------------------------------------------------
    - data:
        answer: "è¯·æä¾›1-3ä¸ªç¾è‚¡ä»£ç (ç¤ºä¾‹:AAPL æˆ– AAPL, MSFT)"
        desc: ''
        selected: false
        title: ğŸš« å›å¤æ— æ•ˆè¾“å…¥
        type: answer
      height: 94
      id: '2001'
      position:
        x: 930
        y: 50
      positionAbsolute:
        x: 930
        y: 50
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
      
    # --------------------------------------------------
    # 5. PATH B: TICKER INPUT
    # --------------------------------------------------
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: 'Agent 2: Generates the command list.'
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: claude-3-haiku-20240307
          provider: anthropic
        prompt_template:
        - id: "sys-cmdlist"
          role: system
          text: |
            ä½ æ˜¯ä¸€ä¸ªç¾è‚¡æœŸæƒåˆ†æåŠ©æ‰‹ã€‚ä½ çš„å”¯ä¸€ä»»åŠ¡æ˜¯æ ¹æ®ç”¨æˆ·æä¾›çš„ä»£ç ,ä¸¥æ ¼æŒ‰ç…§ã€æ•°æ®æŠ“å–å‘½ä»¤æ¸…å•ã€‘çš„æ ¼å¼,ä¸ºæ¯ä¸ªæ ‡çš„(å’ŒæŒ‡æ•°)ç”Ÿæˆä¸€ä¸ªæ¸…æ™°çš„ã€å¯ä¾›ç”¨æˆ·å¤åˆ¶ç²˜è´´å»æ‰§è¡Œçš„å‘½ä»¤åˆ—è¡¨ã€‚
            
            ã€ç”¨æˆ·è¾“å…¥ã€‘
            {{#1001.query#}}
            
            ã€é¢„å¤„ç†ã€‘
            1. æå–ä»£ç :ä¾‹å¦‚ "amzn us, QQQ" -> ["AMZN", "QQQ"]
            2. å¤§å†™å»é‡ã€‚
            
            ã€æ•°æ®æŠ“å–å‘½ä»¤æ¸…å•ã€‘
            è¯·ä¸ºæ¯ä¸ªæ ‡çš„ç”Ÿæˆå®Œæ•´çš„å‘½ä»¤åˆ—è¡¨,åŒ…æ‹¬:
            * å¿…è·‘(é€æ ‡çš„ {SYMBOL}):
              * å¢™ä¸é£™:!gexr {SYMBOL} 25 7 w;!gexr {SYMBOL} 25 14 w
              * ATM IV:!skew {SYMBOL} 0 7;!skew {SYMBOL} 0 14
              * ç°ä»·ä¸å¸Œè…Šå€¼:!iv {SYMBOL}
            * æŒ‡æ•°èƒŒæ™¯(å¿…éœ€å­—æ®µ)
            * å›ä¼ è¦æ±‚
            
            è¯·ç«‹å³å¼€å§‹ä¸º {{#1001.query#}} ç”Ÿæˆå‘½ä»¤æ¸…å•ã€‚
        - id: "user-cmdlist"
          role: user
          text: '{{#1001.query#}}'
        selected: false
        title: Agent 2 å‘½ä»¤æ¸…å•
        type: llm
        vision:
          enabled: false
      height: 94
      id: '2002'
      position:
        x: 930
        y: 200
      positionAbsolute:
        x: 930
        y: 200
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: '{{#2002.text#}}'
        desc: ''
        selected: false
        title: âœ… å›å¤å‘½ä»¤æ¸…å•
        type: answer
      height: 94
      id: '2003'
      position:
        x: 1230
        y: 200
      positionAbsolute:
        x: 1230
        y: 200
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242

    # --------------------------------------------------
    # 6. PATH C: DATA INPUT -> Validation
    # --------------------------------------------------
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: 'Agent 3: Parse raw data, calculate metrics, check completeness.'
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: claude-3-opus-20240229
          provider: anthropic
        prompt_template:
        - id: "sys-validate"
          role: system
          text: |
            ä½ æ˜¯ä¸€ä¸ªæ•°æ®æ ¡éªŒä¸è®¡ç®— Agentã€‚
            ä½ çš„ä»»åŠ¡æ˜¯è§£æç”¨æˆ·å›ä¼ çš„åŸå§‹æ•°æ®,å¹¶ä¸¥æ ¼æŒ‰ç…§ã€æ•°æ®å£å¾„ä¸æŒ‡æ ‡å®šä¹‰ã€‘è®¡ç®—æ‰€æœ‰æ ¸å¿ƒå­—æ®µ,æœ€åè¾“å‡ºä¸€ä¸ª JSON å¯¹è±¡ã€‚
            
            ã€ç”¨æˆ·åŸå§‹æ•°æ®ã€‘
            {{#1001.query#}}
            
            ã€æ•°æ®å£å¾„ä¸æŒ‡æ ‡å®šä¹‰ã€‘
            * EM1$(é¢„æœŸå•æ—¥æ³¢å¹…,ç¾å…ƒ):Spot Ã— min(ATM_IV_7D, ATM_IV_14D) Ã— sqrt(1/252)ã€‚
            * Call Wall / Put Wall:å– 7D å’Œ 14D ä¸­ net_gex æ­£è´Ÿæœ€å¤§å€¼å¯¹åº”çš„ strikeã€‚
            
            ã€æ•°æ®æ ¡éªŒå…³å£ã€‘
            æ ¸å¯¹ä»¥ä¸‹æ ¸å¿ƒå­—æ®µæ˜¯å¦é½å…¨å¹¶å·²è®¡ç®—å‡ºæ•°å€¼:
            * æ ‡çš„å¿…éœ€å­—æ®µ: SPOT PRICE | EM1$ | Call Wall | Put Wall | ATM_IV_7D | ATM_IV_14D
            * æŒ‡æ•°èƒŒæ™¯å¿…éœ€å­—æ®µ: SPX/NDX/VIXç­‰
            
            ã€ä»»åŠ¡ã€‘
            1. è§£æã€ç”¨æˆ·åŸå§‹æ•°æ®ã€‘ã€‚
            2. æ‰§è¡Œã€æ•°æ®å£å¾„ä¸æŒ‡æ ‡å®šä¹‰ã€‘ä¸­çš„æ‰€æœ‰è®¡ç®—ã€‚
            3. æ ¸å¯¹ã€æ•°æ®æ ¡éªŒå…³å£ã€‘ä¸­çš„å¿…éœ€å­—æ®µã€‚
            4. ä¸¥æ ¼ä»…è¾“å‡º JSON å¯¹è±¡ã€‚
            
            ã€è¾“å‡ºæ ¼å¼ã€‘
            å¦‚æœæ•°æ®é½å…¨,è¾“å‡º:
            {
              "status": "data_ready",
              "data": {
                "AAPL": { "SPOT_PRICE": 170.0, "EM1$": 2.5, "Call_Wall": 180, ... },
                "SPX": { "NET_GEX_IDX": "...", "EM1$_IDX": "..." }
              }
            }
            
            å¦‚æœæ•°æ®ç¼ºå¤±,è¾“å‡º:
            {
              "status": "missing_data",
              "message": "æ•°æ®æ ¡éªŒå¤±è´¥ã€‚ç¼ºå¤±é¡¹ä¸è¡¥é½æŒ‡å¼•:...",
              "missing_fields": ["...", "..."]
            }
        - id: "user-validate"
          role: user
          text: '{{#1001.query#}}'
        selected: false
        title: Agent 3 æ•°æ®æ ¡éªŒ
        type: llm
        vision:
          enabled: false
      height: 94
      id: '3001'
      position:
        x: 930
        y: 400
      positionAbsolute:
        x: 930
        y: 400
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        cases:
        - case_id: case-ready
          conditions:
          - comparison_operator: contains
            id: cond-ready
            value: data_ready
            variable_selector:
            - '3001'
            - text
          logical_operator: and
        - case_id: case-missing
          conditions:
          - comparison_operator: contains
            id: cond-missing
            value: missing_data
            variable_selector:
            - '3001'
            - text
          logical_operator: and
        desc: ''
        selected: false
        title: æ ¡éªŒåˆ†æ”¯
        type: if-else
      height: 94
      id: '3002'
      position:
        x: 1230
        y: 400
      positionAbsolute:
        x: 1230
        y: 400
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242

    # --------------------------------------------------
    # 7. PATH C.1: MISSING DATA
    # --------------------------------------------------
    - data:
        answer: '{{#3001.text#}}'
        desc: ''
        selected: false
        title: âš ï¸ å›å¤ç¼ºå¤±æ•°æ®
        type: answer
      height: 94
      id: '3003'
      position:
        x: 1530
        y: 300
      positionAbsolute:
        x: 1530
        y: 300
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242

    # --------------------------------------------------
    # 8. PATH C.2: ANALYSIS CHAIN
    # --------------------------------------------------
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: 'Agent 4: Analyze technicals.'
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: claude-3-sonnet-20240229
          provider: anthropic
        prompt_template:
        - id: "sys-ta"
          role: system
          text: |
            ä½ æ˜¯ä¸€ä¸ªæŠ€æœ¯é¢åˆ†æ Agentã€‚
            ä½ çš„ä»»åŠ¡æ˜¯åŸºäºã€æ•°æ®JSONã€‘ä¸­çš„ "TA_Data",è®¡ç®—æŠ€æœ¯é¢å¾—åˆ†å¹¶ç»™å‡ºç®€çŸ­è¯»æ•°ã€‚
            
            ã€æ•°æ®JSONã€‘
            {{#3001.text#}}
            
            ã€æŠ€æœ¯é¢è§„åˆ™ã€‘
            * æŠ€æœ¯é¢é»˜è®¤ç»„åˆA:EMA20/50ä¸å…¶æ–œç‡ã€RSI(14)
            * é»˜è®¤å¯ç”¨1-3é¡¹äº’è¡¥æŒ‡æ ‡
            
            ã€ä»»åŠ¡ã€‘
            1. è§£æã€æ•°æ®JSONã€‘ä¸­çš„ "TA_Data"ã€‚
            2. åº”ç”¨ã€æŠ€æœ¯é¢è§„åˆ™ã€‘è¿›è¡Œè¯„åˆ†(æœ€å¤š+2)ã€‚
            3. ä¸¥æ ¼ä»…è¾“å‡º JSON å¯¹è±¡:
               {
                 "ta_score": 1, 
                 "ta_commentary": "EMA20/50 èµ°å¹³ (+1), RSI(14) å¤„åœ¨ 55 åŒºé—´ (+0)"
               }
        - id: "user-ta"
          role: user
          text: "è¯·åŸºäº Agent 3 çš„æ•°æ®,è¿›è¡ŒæŠ€æœ¯é¢åˆ†æã€‚"
        selected: false
        title: Agent 4 æŠ€æœ¯é¢
        type: llm
        vision:
          enabled: false
      height: 94
      id: '4001'
      position:
        x: 1530
        y: 500
      positionAbsolute:
        x: 1530
        y: 500
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: 'Agent 5: Core analysis, scoring, and scenario probability.'
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: claude-3-opus-20240229
          provider: anthropic
        prompt_template:
        - id: "sys-scenario"
          role: system
          text: |
            ä½ æ˜¯æ ¸å¿ƒå‰§æœ¬æ¨æ¼” Agentã€‚
            ä½ çš„ä»»åŠ¡æ˜¯æ•´åˆã€æ•°æ®JSONã€‘å’Œã€æŠ€æœ¯é¢JSONã€‘,åº”ç”¨ã€è¯„åˆ†æ¡†æ¶ã€‘å’Œã€å‰§æœ¬åˆ†ç±»ã€‘,è¾“å‡ºåˆ†æç»“æœã€‚
            
            ã€æ•°æ®JSONã€‘(æ¥è‡ª Agent 3)
            {{#3001.text#}}
            
            ã€æŠ€æœ¯é¢JSONã€‘(æ¥è‡ª Agent 4)
            {{#4001.text#}}
            
            ã€åˆ†æè§„åˆ™ã€‘
            * è¯„åˆ†æ¡†æ¶:åŸºäº GEX å¢™ä½ã€IV åæ–œã€æŠ€æœ¯é¢ç­‰ç»¼åˆè¯„åˆ†
            * å‰§æœ¬åˆ†ç±»:åŒºé—´/è¶‹åŠ¿ä¸Š/è¶‹åŠ¿ä¸‹/è¿‡æ¸¡
            * å…¥åœºé—¨æ§›:æ€»åˆ†â‰¥3åˆ†
            
            ã€ä»»åŠ¡ã€‘
            1. æ•´åˆæ‰€æœ‰æ•°æ®ã€‚
            2. æ‰§è¡Œã€è¯„åˆ†æ¡†æ¶ã€‘,è®¡ç®—æ€»åˆ†ã€‚
            3. æ‰§è¡Œã€å‰§æœ¬åˆ†ç±»ã€‘,åˆ¤å®šæ¦‚ç‡ã€‚
            4. ä¸¥æ ¼ä»…è¾“å‡º JSON å¯¹è±¡:
               {
                 "analysis_summary": "ä¸»å¯¼æ–¹å‘ä¸é©±åŠ¨...",
                 "total_score": 3,
                 "scenarios": [
                   { "type": "åŒºé—´", "probability": 65 },
                   { "type": "è¶‹åŠ¿ä¸Šè¡Œ", "probability": 25 }
                 ],
                 "dominant_scenario": "åŒºé—´",
                 "entry_threshold_check": "å…¥åœº" 
               }
        - id: "user-scenario"
          role: user
          text: "è¯·æ•´åˆæ•°æ®,è¿›è¡Œå‰§æœ¬æ¨æ¼”ä¸è¯„åˆ†ã€‚"
        selected: false
        title: Agent 5 å‰§æœ¬åˆ†æ
        type: llm
        vision:
          enabled: false
      height: 94
      id: '5001'
      position:
        x: 1830
        y: 500
      positionAbsolute:
        x: 1830
        y: 500
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: 'Agent 6: Generate actionable strategies with RR/Pw.'
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: claude-3-opus-20240229
          provider: anthropic
        prompt_template:
        - id: "sys-strategy"
          role: system
          text: |
            ä½ æ˜¯æœŸæƒç­–ç•¥ç”Ÿæˆ Agentã€‚
            ä½ çš„ä»»åŠ¡æ˜¯åŸºäºã€æ•°æ®JSONã€‘å’Œã€å‰§æœ¬åˆ†æJSONã€‘,ç”Ÿæˆä¸‰ç§ç­–ç•¥(ä¿å®ˆ/å‡è¡¡/è¿›å–),å¹¶ä¸¥æ ¼è®¡ç®—æ¯ç§ç­–ç•¥çš„ç›ˆäºæ¯”(RR)å’Œèƒœç‡(Pw)ã€‚
            
            ã€æ•°æ®JSONã€‘(æ¥è‡ª Agent 3)
            {{#3001.text#}}
            
            ã€å‰§æœ¬åˆ†æJSONã€‘(æ¥è‡ª Agent 5)
            {{#5001.text#}}
            
            ã€ç­–ç•¥æ˜ å°„è§„åˆ™ã€‘
            * ä¿¡ç”¨ä»·å·®/é“é¹°(ä¿å®ˆ)
            * è¶å¼/é“ç§ƒé¹°(å‡è¡¡)
            * å€Ÿè´·ä»·å·®/æ—¥å†ä»·å·®(è¿›å–)
            * ç›ˆäºæ¯”(RR)â‰ˆ C:(W-C);èƒœç‡(Pw)â‰ˆ clamp[...]
            
            ã€ä»»åŠ¡ã€‘
            1. æ ¹æ® dominant_scenario é€‰æ‹©ç­–ç•¥ç±»å‹ã€‚
            2. æ ¹æ® EM1$ å’Œ Walls ç¡®å®šè¡Œæƒä»·ã€‚
            3. ä¸¥æ ¼æ‰§è¡Œã€ç­–ç•¥æ˜ å°„è§„åˆ™ã€‘ä¸­çš„å…¬å¼,è®¡ç®— RR å’Œ Pwã€‚
            4. ä¸¥æ ¼ä»…è¾“å‡º JSON æ•°ç»„:
               [
                 {
                   "type": "ä¿å®ˆ (ä¿¡ç”¨ä»·å·®)",
                   "structure": "Sell 1x AAPL 180C / Buy 1x AAPL 182.5C",
                   "DTE": 14,
                   "greeks": "...",
                   "RR_estimate": "1:4 (C=0.5, W=2.5)",
                   "Pw_estimate": "75%"
                 }
               ]
        - id: "user-strategy"
          role: user
          text: "è¯·æ ¹æ®åˆ†æç»“æœ,ç”Ÿæˆå¸¦RR/Pwçš„ç­–ç•¥ã€‚"
        selected: false
        title: Agent 6 ç­–ç•¥ç”Ÿæˆ
        type: llm
        vision:
          enabled: false
      height: 94
      id: '6001'
      position:
        x: 2130
        y: 500
      positionAbsolute:
        x: 2130
        y: 500
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: 'Agent 7: Assemble the final report based on the template.'
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: claude-3-opus-20240229
          provider: anthropic
        prompt_template:
        - id: "sys-report"
          role: system
          text: |
            ä½ æ˜¯æœ€ç»ˆæŠ¥å‘Šç”Ÿæˆ Agentã€‚
            ä½ çš„ä»»åŠ¡æ˜¯æ±‡æ€»æ‰€æœ‰ä¸Šæ¸¸ Agent çš„ JSON è¾“å‡º,å¹¶ä¸¥æ ¼æŒ‰ç…§ã€è¾“å‡ºæ¨¡æ¿ã€‘ç”Ÿæˆä¸€ä»½ç»™ç”¨æˆ·çš„ã€äººç±»å¯è¯»çš„ Markdown æŠ¥å‘Šã€‚
            
            ã€æ•°æ®JSONã€‘(æ¥è‡ª Agent 3)
            {{#3001.text#}}
            
            ã€æŠ€æœ¯é¢JSONã€‘(æ¥è‡ª Agent 4)
            {{#4001.text#}}
            
            ã€å‰§æœ¬åˆ†æJSONã€‘(æ¥è‡ª Agent 5)
            {{#5001.text#}}
            
            ã€ç­–ç•¥JSONã€‘(æ¥è‡ª Agent 6)
            {{#6001.text#}}
            
            ã€é£æ§è§„åˆ™ã€‘
            * å…¥åœº:æ¬¡æ—¥å¼€ç›˜å15-30åˆ†é’Ÿ
            * æ­¢ç›ˆ:åˆ°è¾¾æœ€å¤§åˆ©æ¶¦çš„70-80%
            * æ­¢æŸ:è¾¾åˆ°æœ€å¤§äºæŸçš„50%æˆ–æŒæœ‰3-5ä¸ªäº¤æ˜“æ—¥
            
            ã€è¾“å‡ºæ¨¡æ¿ã€‘
            * æ•°æ®æ ¡éªŒå…³å£ç»“æœ
              * æ ‡çš„:EM1$=;... (ä» Agent 3 JSON æå–)
            * åˆæ¬¡åˆ†æ(å«æŠ€æœ¯äº’è¡¥1-3é¡¹)
              * ä¸»å¯¼æ–¹å‘ä¸é©±åŠ¨... (ä» Agent 5 JSON æå–)
              * æŠ€æœ¯è¯»æ•°:... (ä» Agent 4 JSON æå–)
            * å‰§æœ¬ä¸æ¦‚ç‡
              * åŒºé—´/è¶‹åŠ¿ä¸Š/è¶‹åŠ¿ä¸‹/è¿‡æ¸¡:... (ä» Agent 5 JSON æå–)
            * ç­–ç•¥å»ºè®®(é€ä¸€ç»™:ä¿å®ˆ/å‡è¡¡/è¿›å–)
              * (ä» Agent 6 JSON æå–, æ ¼å¼åŒ–)
              * æ­¢ç›ˆæ­¢æŸä¸æ—¶é—´è§„åˆ™ (ä»ã€é£æ§è§„åˆ™ã€‘æå–)
            * æ˜¯å¦å…¥åœºäº¤æ˜“:(ä» Agent 5 JSON æå– 'entry_threshold_check'),å¹¶ç»™å‡ºæ˜ç¡®ç†ç”±...
            * ç›‘æ§è¦ç‚¹:...
            
            è¯·ç«‹å³å¼€å§‹ç”Ÿæˆæœ€ç»ˆæŠ¥å‘Šã€‚
        - id: "user-report"
          role: user
          text: "è¯·æ±‡æ€»æ‰€æœ‰åˆ†æ,ç”Ÿæˆæœ€ç»ˆæŠ¥å‘Šã€‚"
        selected: false
        title: Agent 7 æœ€ç»ˆæŠ¥å‘Š
        type: llm
        vision:
          enabled: false
      height: 94
      id: '7001'
      position:
        x: 2430
        y: 650
      positionAbsolute:
        x: 2430
        y: 650
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: '{{#7001.text#}}'
        desc: ''
        selected: false
        title: ğŸ“ˆ å›å¤æœ€ç»ˆåˆ†ææŠ¥å‘Š
        type: answer
      height: 94
      id: '7002'
      position:
        x: 2730
        y: 650
      positionAbsolute:
        x: 2730
        y: 650
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242

  rag_pipeline_variables: []